<?xml version="1.0" encoding="UTF-8"?>
<bpws:process exitOnStandardFault="no"
    name="CORE_SERVICE.ProcessUtilities.ProcessCtx.Ctx_Xml"
    suppressJoinFailure="yes"
    targetNamespace="http://xmlns.example.com/1246912260497"
    xmlns:bpws="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:info="http://www.tibco.com/bw/process/info"
    xmlns:ns="http://www.tibco.com/pe/EngineTypes"
    xmlns:ns0="/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ProcessCtx/Ctx_Xml-Start-Input.xsd"
    xmlns:ns1="/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/ReadProcessStack-Start-Input.xsd"
    xmlns:ns10="/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/BuildError-Start-Input.xsd"
    xmlns:ns11="/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/BuildError-End-Output.xsd"
    xmlns:ns12="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException"
    xmlns:ns13="/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ProcessCtx/Ctx_Xml-End-Output.xsd"
    xmlns:ns14="http://tns.tibco.com/bw/palette/internal/activityerror+com.tibco.bw.core.design.process.editor.Activity_4002_Throw"
    xmlns:ns15="http://tns.tibco.com/bw/palette/internal/activityerror+bw.internal.end"
    xmlns:ns2="/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/ReadProcessStack-End-Output.xsd"
    xmlns:ns3="http://www.tibco.com/namespaces/tnt/plugins/parsexml"
    xmlns:ns4="http://soa.coe.com/CommonTypes/Mediation/xmlMsg"
    xmlns:ns5="http://tns.tibco.com/bw/palette/internal/activityerror+bw.xml.parsexml"
    xmlns:ns6="/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ManageTraceData/subprocess/GetTraceData-Start-Input.xsd"
    xmlns:ns7="/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ManageTraceData/subprocess/GetTraceData-End-Output.xsd"
    xmlns:ns8="http://tns.tibco.com/bw/model/core/jobSV/1c6d3ff3-5c7d-4c2a-9519-7c932aacba1d"
    xmlns:ns9="http://tns.tibco.com/bw/model/core/jobSV/9056491e-07ee-4a3a-a451-7be822b839fe"
    xmlns:sca="http://docs.oasis-open.org/ns/opencsa/sca/200912"
    xmlns:sca-bpel="http://docs.oasis-open.org/ns/opencsa/sca-bpel/200801"
    xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"
    xmlns:tibprop="http://ns.tibco.com/bw/property"
    xmlns:tns="http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <tibex:Types>
        <xs:schema attributeFormDefault="unqualified"
            elementFormDefault="qualified"
            targetNamespace="http://www.tibco.com/pe/EngineTypes"
            xmlns:tns="http://www.tibco.com/pe/EngineTypes" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <xs:complexType block="extension restriction"
                final="extension restriction" name="ErrorReport">
                <xs:sequence>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="StackTrace" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="Msg" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="FullClass" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="Class" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="ProcessStack" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0" name="MsgCode" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0" name="Data" type="tns:anydata"/>
                </xs:sequence>
            </xs:complexType>
            <xs:complexType block="extension restriction"
                final="extension restriction" name="OptionalErrorReport">
                <xs:sequence>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0"
                        name="StackTrace" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0" name="Msg" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0"
                        name="FullClass" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0" name="Class" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0"
                        name="ProcessStack" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0" name="MsgCode" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0" name="Data" type="tns:anydata"/>
                </xs:sequence>
            </xs:complexType>
            <xs:complexType block="extension restriction"
                final="extension restriction" name="FaultDetail">
                <xs:sequence>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="ActivityName" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0" name="Data" type="tns:anydata"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="Msg" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="MsgCode" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="ProcessStack" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="StackTrace" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="FullClass" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="Class" type="xs:string"/>
                </xs:sequence>
            </xs:complexType>
            <xs:complexType block="extension restriction"
                final="extension restriction" name="ProcessContext">
                <xs:sequence>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="JobId" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="ApplicationName" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="EngineName" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="ProcessInstanceId" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0"
                        name="CustomJobId" type="xs:string"/>
                    <!--xs:element name="RestartedFromCheckpoint" form="unqualified" block="extension restriction substitution" type="xs:boolean"/-->
                    <!--xs:element minOccurs="0" maxOccurs="unbounded" name="TrackingInfo" form="unqualified" block="extension restriction substitution" type="xs:string"/-->
                </xs:sequence>
            </xs:complexType>
            <xs:complexType block="extension restriction"
                final="extension restriction" name="anydata">
                <xs:sequence>
                    <xs:any namespace="##any" processContents="lax"/>
                </xs:sequence>
            </xs:complexType>
            <xs:element block="extension restriction substitution"
                final="extension restriction" name="OptionalErrorReport" type="tns:OptionalErrorReport"/>
            <xs:element block="extension restriction substitution"
                final="extension restriction" name="ErrorReport" type="tns:ErrorReport"/>
            <xs:element block="extension restriction substitution"
                final="extension restriction" name="FaultDetail" type="tns:FaultDetail"/>
            <xs:element block="extension restriction substitution"
                final="extension restriction" name="ProcessContext" type="tns:ProcessContext"/>
            <xs:element block="extension restriction substitution"
                final="extension restriction" name="CorrelationValue" type="xs:string"/>
        </xs:schema>
        <schema attributeFormDefault="unqualified"
            elementFormDefault="unqualified"
            targetNamespace="http://schemas.tibco.com/bw/pe/plugin/5.0/exceptions"
            version="" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://schemas.tibco.com/bw/pe/plugin/5.0/exceptions">
            <complexType name="ActivityExceptionType">
                <sequence>
                    <element name="msg" type="string"/>
                    <element minOccurs="0" name="msgCode" type="string"/>
                </sequence>
            </complexType>
            <element name="ActivityException" type="tns:ActivityExceptionType"/>
            <complexType name="ActivityTimedOutExceptionType">
                <complexContent>
                    <extension base="tns:ActivityExceptionType"/>
                </complexContent>
            </complexType>
            <element name="ActivityTimedOutException" type="tns:ActivityTimedOutExceptionType"/>
        </schema>
        <xsd:schema
            targetNamespace="http://www.tibco.com/namespaces/tnt/plugins/parsexml"
            xmlns:tns="http://www.tibco.com/namespaces/tnt/plugins/parsexml" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
            <xsd:complexType name="configType">
                <xsd:sequence>
                    <xsd:element form="unqualified" name="term" type="xsd:anyType"/>
                    <xsd:element form="unqualified" minOccurs="0"
                        name="inputStyle" type="xsd:string"/>
                    <xsd:element form="unqualified" minOccurs="0"
                        name="xsdVersion" type="xsd:string"/>
                </xsd:sequence>
            </xsd:complexType>
            <xsd:complexType name="dynamicInputType">
                <xsd:choice>
                    <xsd:element ref="tns:xmlBinary"/>
                    <xsd:element ref="tns:xmlString"/>
                </xsd:choice>
            </xsd:complexType>
            <xsd:element name="config" type="tns:configType"/>
            <xsd:element name="element" type="xsd:string"/>
            <xsd:element name="schemaRef" type="xsd:string"/>
            <xsd:element name="textEncoding" type="xsd:string"/>
            <xsd:element name="validateOutput" type="xsd:boolean"/>
            <xsd:element name="writeXsiTypes" type="xsd:boolean"/>
            <xsd:element name="xmlBinary">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element form="unqualified" name="bytes" type="xsd:base64Binary"/>
                        <xsd:element form="unqualified" minOccurs="0"
                            name="forceEncoding" type="xsd:string"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="xmlParserInput" type="tns:dynamicInputType"/>
            <xsd:element name="xmlString" type="xsd:string"/>
        </xsd:schema>
        <schema elementFormDefault="unqualified"
            targetNamespace="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions"
            xmlns="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions">
            <element name="XMLException" type="tns:XMLExceptionType"/>
            <complexType name="XMLExceptionType">
                <sequence>
                    <element name="msg" type="string"/>
                    <element minOccurs="0" name="msgCode" type="string"/>
                </sequence>
            </complexType>
            <element name="UnsupportedEncodingException" type="tns:UnsupportedEncodingExceptionType"/>
            <complexType name="UnsupportedEncodingExceptionType">
                <complexContent>
                    <extension base="tns:XMLExceptionType">
                        <sequence>
                            <element name="encoding" type="string"/>
                        </sequence>
                    </extension>
                </complexContent>
            </complexType>
            <complexType name="XMLRenderExceptionType">
                <complexContent>
                    <extension base="tns:XMLExceptionType"/>
                </complexContent>
            </complexType>
            <element name="XMLRenderException" type="tns:XMLRenderExceptionType"/>
            <complexType name="XMLParseExceptionType">
                <complexContent>
                    <extension base="tns:XMLExceptionType"/>
                </complexContent>
            </complexType>
            <element name="XMLParseException" type="tns:XMLParseExceptionType"/>
            <complexType name="XMLTransformExceptionType">
                <complexContent>
                    <extension base="tns:XMLExceptionType"/>
                </complexContent>
            </complexType>
            <element name="XMLTransformException" type="tns:XMLTransformExceptionType"/>
            <complexType name="MissingByteCountExceptionType">
                <complexContent>
                    <extension base="tns:XMLExceptionType"/>
                </complexContent>
            </complexType>
            <element name="MissingByteCountException" type="tns:MissingByteCountExceptionType"/>
            <complexType name="ValidationExceptionType">
                <complexContent>
                    <extension base="tns:XMLExceptionType"/>
                </complexContent>
            </complexType>
            <element name="ValidationException" type="tns:ValidationExceptionType"/>
        </schema>
        <schema elementFormDefault="unqualified"
            targetNamespace="http://tns.tibco.com/bw/palette/internal/activityerror+bw.xml.parsexml"
            xmlns="http://www.w3.org/2001/XMLSchema"
            xmlns:Q1="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions" xmlns:tns="http://tns.tibco.com/bw/palette/internal/activityerror+bw.xml.parsexml">
            <import namespace="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions"/>
            <import namespace="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions"/>
            <import namespace="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions"/>
            <import namespace="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions"/>
            <element name="ActivityErrorData" type="tns:ActivityErrorDataType"/>
            <complexType name="ActivityErrorDataType">
                <choice>
                    <element maxOccurs="1" minOccurs="0" ref="Q1:XMLParseException"/>
                    <element maxOccurs="1" minOccurs="0" ref="Q1:UnsupportedEncodingException"/>
                    <element maxOccurs="1" minOccurs="0" ref="Q1:MissingByteCountException"/>
                    <element maxOccurs="1" minOccurs="0" ref="Q1:ValidationException"/>
                </choice>
            </complexType>
        </schema>
        <schema elementFormDefault="unqualified"
            targetNamespace="http://tns.tibco.com/bw/palette/internal/activityerror+com.tibco.bw.core.design.process.editor.Activity_4002_Throw"
            xmlns="http://www.w3.org/2001/XMLSchema"
            xmlns:Q1="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException" xmlns:tns="http://tns.tibco.com/bw/palette/internal/activityerror+com.tibco.bw.core.design.process.editor.Activity_4002_Throw">
            <import namespace="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException"/>
            <element name="ActivityErrorData" type="tns:ActivityErrorDataType"/>
            <complexType name="ActivityErrorDataType">
                <choice>
                    <element maxOccurs="1" minOccurs="0" ref="Q1:bwException"/>
                </choice>
            </complexType>
        </schema>
        <schema elementFormDefault="unqualified"
            targetNamespace="http://tns.tibco.com/bw/palette/internal/activityerror+bw.internal.end"
            xmlns="http://www.w3.org/2001/XMLSchema"
            xmlns:Q1="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException" xmlns:tns="http://tns.tibco.com/bw/palette/internal/activityerror+bw.internal.end">
            <import namespace="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException"/>
            <element name="ActivityErrorData" type="tns:ActivityErrorDataType"/>
            <complexType name="ActivityErrorDataType">
                <choice>
                    <element maxOccurs="1" minOccurs="0" ref="Q1:bwException"/>
                </choice>
            </complexType>
        </schema>
    </tibex:Types>
    <tibex:ProcessInfo callable="true" createdBy="akadala"
        createdOn="Wed Sep 13 14:38:39 IST 2017" description=""
        extraErrorVars="true" modifiers="public"
        productVersion="6.4.0 V29 2017-05-09" scalable="false"
        singleton="true" stateless="false" type="IT"/>
    <tibex:ProcessInterface context=""
        input="{/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ProcessCtx/Ctx_Xml-Start-Input.xsd}Input" output="{/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ProcessCtx/Ctx_Xml-End-Output.xsd}Output">
        <tibex:errorList>
            <tibex:error
                error="{http://soa.coe.com/CommonTypes/Mediation/Framework/BWException}bwException" name="bwException"/>
        </tibex:errorList>
    </tibex:ProcessInterface>
    <tibex:ProcessTemplateConfigurations/>
    <notation:Diagram measurementUnit="Pixel" type="BWProcess"
        xmlns:bwnotation="http://tns.tibco.com/bw/runtime/BWNotation"
        xmlns:notation="http://www.eclipse.org/gmf/runtime/1.0.2/notation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <children type="2001">
            <children type="5001"/>
            <children type="3002">
                <styles xsi:type="notation:SortingStyle"/>
                <styles xsi:type="notation:FilteringStyle"/>
            </children>
            <children type="3003">
                <styles xsi:type="notation:SortingStyle"/>
                <styles xsi:type="notation:FilteringStyle"/>
            </children>
            <children type="3004">
                <children type="4018">
                    <children type="3018">
                        <children type="4020">
                            <children type="3020">
                                <children type="4005">
                                    <children type="3007">
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.0"/>
                                    <layoutConstraint x="27"
                                    xsi:type="notation:Bounds" y="183"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.1"/>
                                    <layoutConstraint x="129"
                                    xsi:type="notation:Bounds" y="183"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.2"/>
                                    <layoutConstraint x="389"
                                    xsi:type="notation:Bounds" y="183"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.3"/>
                                    <layoutConstraint x="126"
                                    xsi:type="notation:Bounds" y="424"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.4"/>
                                    <layoutConstraint x="612"
                                    xsi:type="notation:Bounds" y="183"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.5"/>
                                    <layoutConstraint x="50"
                                    xsi:type="notation:Bounds" y="589"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.6"/>
                                    <layoutConstraint x="387"
                                    xsi:type="notation:Bounds" y="316"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.7"/>
                                    <layoutConstraint x="126"
                                    xsi:type="notation:Bounds" y="749"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.8"/>
                                    <layoutConstraint x="806"
                                    xsi:type="notation:Bounds" y="183"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.9"/>
                                    <layoutConstraint x="252"
                                    xsi:type="notation:Bounds" y="315"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.10"/>
                                    <layoutConstraint x="211"
                                    xsi:type="notation:Bounds" y="420"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.11"/>
                                    <layoutConstraint x="973"
                                    xsi:type="notation:Bounds" y="743"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.12"/>
                                    <layoutConstraint x="972"
                                    xsi:type="notation:Bounds" y="183"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.13"/>
                                    <layoutConstraint x="387"
                                    xsi:type="notation:Bounds" y="696"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.14"/>
                                    <layoutConstraint x="51"
                                    xsi:type="notation:Bounds" y="752"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.15"/>
                                    <layoutConstraint x="555"
                                    xsi:type="notation:Bounds" y="319"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.16"/>
                                    <layoutConstraint x="737"
                                    xsi:type="notation:Bounds" y="105"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.17"/>
                                    <layoutConstraint x="475"
                                    xsi:type="notation:Bounds" y="417"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.18"/>
                                    <layoutConstraint x="899"
                                    xsi:type="notation:Bounds" y="105"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.19"/>
                                    <layoutConstraint x="584"
                                    xsi:type="notation:Bounds" y="682"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.20"/>
                                    <layoutConstraint x="48"
                                    xsi:type="notation:Bounds" y="866"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.21"/>
                                    <layoutConstraint x="210"
                                    xsi:type="notation:Bounds" y="530"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.22"/>
                                    <layoutConstraint x="1198"
                                    xsi:type="notation:Bounds" y="183"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.23"/>
                                    <layoutConstraint x="209"
                                    xsi:type="notation:Bounds" y="641"/>
                                    </children>
                                    <children
                                    description="Error 0000: No process context is set - subsequent framework utilities (policyOnError) will rely on this code to deal with appropriate logic."
                                    fillColor="13369343"
                                    lineColor="6737151"
                                    lineWidth="1"
                                    transparency="0" type="Note" xsi:type="notation:Shape">
                                    <children type="DiagramName" xsi:type="notation:BasicDecorationNode">
                                    <element xsi:nil="true"/>
                                    </children>
                                    <children type="Description" xsi:type="notation:BasicDecorationNode">
                                    <element xsi:nil="true"/>
                                    </children>
                                    <styles xsi:type="notation:TextStyle"/>
                                    <styles xsi:type="notation:LineTypeStyle"/>
                                    <element xsi:nil="true"/>
                                    <layoutConstraint
                                    height="69" width="322"
                                    x="764"
                                    xsi:type="notation:Bounds" y="565"/>
                                    </children>
                                    <children
                                    description="DESCRIPTION: Set a process context for xml messaging using header  xmlMsg"
                                    fillColor="13369343"
                                    lineColor="6737151"
                                    lineWidth="1"
                                    transparency="0" type="Note" xsi:type="notation:Shape">
                                    <children type="DiagramName" xsi:type="notation:BasicDecorationNode">
                                    <element xsi:nil="true"/>
                                    </children>
                                    <children type="Description" xsi:type="notation:BasicDecorationNode">
                                    <element xsi:nil="true"/>
                                    </children>
                                    <styles xsi:type="notation:TextStyle"/>
                                    <styles xsi:type="notation:LineTypeStyle"/>
                                    <element xsi:nil="true"/>
                                    <layoutConstraint
                                    height="48" width="826"
                                    x="414"
                                    xsi:type="notation:Bounds" y="25"/>
                                    </children>
                                    <children
                                    description="We allow the initialization of proces context without body parsing to cover for  the case of ErrorOnStart . In this case, we set the process context without msg context. Subsequent error is raised by the ErrorOnStart caller process, after the context is set."
                                    fillColor="13369343"
                                    lineColor="6737151"
                                    lineWidth="1"
                                    transparency="0" type="Note" xsi:type="notation:Shape">
                                    <children type="DiagramName" xsi:type="notation:BasicDecorationNode">
                                    <element xsi:nil="true"/>
                                    </children>
                                    <children type="Description" xsi:type="notation:BasicDecorationNode">
                                    <element xsi:nil="true"/>
                                    </children>
                                    <styles xsi:type="notation:TextStyle"/>
                                    <styles xsi:type="notation:LineTypeStyle"/>
                                    <element xsi:nil="true"/>
                                    <layoutConstraint
                                    height="100" width="348"
                                    x="302"
                                    xsi:type="notation:Bounds" y="841"/>
                                    </children>
                                    <styles xsi:type="notation:DrawerStyle"/>
                                    <styles xsi:type="notation:SortingStyle"/>
                                    <styles xsi:type="notation:FilteringStyle"/>
                                    <element href="//0/@process/@activity/@activity"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <styles xsi:type="bwnotation:ResizingStyle"/>
                                    <element href="//0/@process/@activity/@activity"/>
                                    <layoutConstraint height="108"
                                    width="400" x="2"
                                    xsi:type="notation:Bounds" y="2"/>
                                </children>
                                <styles xsi:type="notation:SortingStyle"/>
                                <styles xsi:type="notation:FilteringStyle"/>
                            </children>
                            <styles fontName="Segoe UI" lineColor="0" xsi:type="notation:ShapeStyle"/>
                            <styles xsi:type="bwnotation:BackgroundStyle"/>
                            <styles xsi:type="bwnotation:ResizingStyle"/>
                            <element href="//0/@process/@activity"/>
                            <layoutConstraint height="365" width="444"
                                x="30" xsi:type="notation:Bounds" y="20"/>
                        </children>
                        <styles xsi:type="notation:SortingStyle"/>
                        <styles xsi:type="notation:FilteringStyle"/>
                        <element href="//0/@process/@activity"/>
                    </children>
                    <styles fontName="Segoe UI" lineColor="0" xsi:type="notation:ShapeStyle"/>
                    <styles xsi:type="bwnotation:BackgroundStyle"/>
                    <styles xsi:type="bwnotation:ResizingStyle"/>
                    <element href="//0/@process/@activity"/>
                    <layoutConstraint height="409" width="519" xsi:type="notation:Bounds"/>
                </children>
                <styles xsi:type="notation:SortingStyle"/>
                <styles xsi:type="notation:FilteringStyle"/>
                <element href="//0/@process"/>
            </children>
            <styles fontName="Segoe UI" lineColor="0" xsi:type="notation:ShapeStyle"/>
            <element href="//0/@process"/>
            <layoutConstraint height="1732" width="2396" xsi:type="notation:Bounds"/>
        </children>
        <styles xsi:type="notation:DiagramStyle"/>
        <element href="//0"/>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.21"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.23" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.0"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.13"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.19" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.1"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.8"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.13" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.2"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.8"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.12" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.3"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.2"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.6" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.4"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.11"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.12" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.5"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.9"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.13" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.6"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.9"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.10" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.7"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.7"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.13" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.8"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.7"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.11" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.9"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.1" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.10"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.1"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.2" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.11"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.1"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.3" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.12"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.12"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.22" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.13"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.10"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.21" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.14"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.10"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.13" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.15"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.12"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.13" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.16"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.6"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.9" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.17"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.6"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.13" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.18"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.5"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.7" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.19"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.2"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.4" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.20"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.4"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.8" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.21"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.3"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.7" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.22"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.3"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.5" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.23"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.5"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.14" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.24"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.14"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.20" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.25"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.6"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.15" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.26"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.15"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.17" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.27"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.4"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.16" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.28"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.16"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.18" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.29"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
    </notation:Diagram>
    <bpws:documentation>context for XML MESSAGE, with referenced header</bpws:documentation>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema"
        location="../../../CORE_COMMON/Resources/Schemas/ErrorHandling/BWException.xsd" namespace="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema"
        location="../../Resources/Schemas/ProcessContext/StdProcessContext.xsd" namespace="http://soa.coe.com/CommonTypes/Mediation/BWProcessContext"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema"
        location="../../../CORE_COMMON/Resources/Schemas/Messaging/XmlMsg.xsd" namespace="http://soa.coe.com/CommonTypes/Mediation/xmlMsg"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema"
        location="../../../CORE_COMMON/Resources/Schemas/CommonTypes/MsgHeaderTypes.xsd" namespace="http://soa.coe.com/CommonTypes/Mediation/Framework"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema"
        location="../../../CORE_COMMON/Resources/Schemas/CommonTypes/CommonFrameworkTypes.xsd" namespace="http://soa.coe.com/CommonTypes/Mediation/Framework"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema"
        location="Ctx_Xml-End-Output.xsd" namespace="/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ProcessCtx/Ctx_Xml-End-Output.xsd"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema" namespace="/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/BuildError-Start-Input.xsd"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema" namespace="/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/ReadProcessStack-Start-Input.xsd"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema" namespace="/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ProcessCtx/Ctx_Xml-Start-Input.xsd"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema" namespace="/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/ReadProcessStack-End-Output.xsd"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema" namespace="/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ManageTraceData/subprocess/GetTraceData-Start-Input.xsd"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema" namespace="/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ManageTraceData/subprocess/GetTraceData-End-Output.xsd"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema" namespace="http://tns.tibco.com/bw/model/core/jobSV/1c6d3ff3-5c7d-4c2a-9519-7c932aacba1d"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema" namespace="/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/BuildError-End-Output.xsd"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema" namespace="http://tns.tibco.com/bw/model/core/jobSV/9056491e-07ee-4a3a-a451-7be822b839fe"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema" namespace="http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes"/>
    <bpws:variables>
        <bpws:variable element="ns:ProcessContext"
            name="_processContext" sca-bpel:internal="true"/>
        <bpws:variable name="CORE_COMMONResourcesConnectionJMSJMS_LOG"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            sca-bpel:sharedResourceType="{http://xsd.tns.tibco.com/bw/models/sharedresource/jms}JMSConnectionFactory"
            tibex:propertySource="CORE_COMMONResourcesConnectionJMSJMS_LOG" type="xsd:string"/>
        <bpws:variable
            name="CORE_COMMONResourcesConnectionDBDB_CORE_LOG"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            sca-bpel:sharedResourceType="{http://xsd.tns.tibco.com/amf/models/sharedresource/jdbc}JdbcDataSource"
            tibex:propertySource="CORE_COMMONResourcesConnectionDBDB_CORE_LOG" type="xsd:string"/>
        <bpws:variable name="CORE_COMMONResourcesConnectionJMSJMS_MSG"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            sca-bpel:sharedResourceType="{http://xsd.tns.tibco.com/bw/models/sharedresource/jms}JMSConnectionFactory"
            tibex:propertySource="CORE_COMMONResourcesConnectionJMSJMS_MSG" type="xsd:string"/>
        <bpws:variable name="CORE_STATResourcesConnectionJMSJMS_STAT"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            sca-bpel:sharedResourceType="{http://xsd.tns.tibco.com/bw/models/sharedresource/jms}JMSConnectionFactory"
            tibex:propertySource="CORE_STATResourcesConnectionJMSJMS_STAT" type="xsd:string"/>
        <bpws:variable element="ns0:Input" name="Start"
            sca-bpel:internal="true" tibex:parameter="in"/>
        <bpws:variable element="ns1:input" name="ReadProcessStack-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns2:output" name="ReadProcessStack" sca-bpel:internal="true"/>
        <bpws:variable element="ns3:xmlString" name="ParseHeader-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns4:xmlMsg" name="ParseHeader" sca-bpel:internal="true"/>
        <bpws:variable element="ns5:ActivityErrorData"
            name="_error_ParseHeader" sca-bpel:internal="true"/>
        <bpws:variable element="ns:ErrorReport" name="_error" sca-bpel:internal="true"/>
        <bpws:variable element="ns6:root" name="getTraceData-2-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns7:root" name="getTraceData-2" sca-bpel:internal="true"/>
        <bpws:variable element="ns6:root" name="getTraceData-1-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns7:root" name="getTraceData-1" sca-bpel:internal="true"/>
        <bpws:variable name="CORE_SERVICE-SvcProps-Framework-NULL_CODE"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_SERVICE/SvcProps/Framework/NULL_CODE" type="xsd:string"/>
        <bpws:variable element="ns6:root" name="getTraceData-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns7:root" name="getTraceData" sca-bpel:internal="true"/>
        <bpws:variable element="ns8:root" name="SetPC_2-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns8:root" name="SetPC_2" sca-bpel:internal="true"/>
        <bpws:variable
            name="CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_SERVICE/ProcessUtilities/ProcessCtx/defaultEnableTracing" type="xsd:string"/>
        <bpws:variable
            name="CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_SERVICE/ProcessUtilities/ProcessCtx/defaultLogMsgBody" type="xsd:string"/>
        <bpws:variable
            name="CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_SERVICE/ProcessUtilities/ProcessCtx/defaultLogMsgConsulting" type="xsd:string"/>
        <bpws:variable
            name="CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_SERVICE/ProcessUtilities/ProcessCtx/defaultLogComponent" type="xsd:string"/>
        <bpws:variable
            name="CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_SERVICE/ProcessUtilities/ProcessCtx/defaultLogComponentError" type="xsd:string"/>
        <bpws:variable element="ns8:root" name="SetPC_0-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns8:root" name="SetPC_0" sca-bpel:internal="true"/>
        <bpws:variable element="ns8:root" name="SetPC_1-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns8:root" name="SetPC_1" sca-bpel:internal="true"/>
        <bpws:variable element="ns9:root" name="SetPC_1_MsgBody-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns9:root" name="SetPC_1_MsgBody" sca-bpel:internal="true"/>
        <bpws:variable element="ns9:root" name="SetPC_0_MsgBody-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns9:root" name="SetPC_0_MsgBody" sca-bpel:internal="true"/>
        <bpws:variable element="ns10:input" name="BE0000-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns11:output" name="BE0000" sca-bpel:internal="true"/>
        <bpws:variable
            name="CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_code"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_COMMON/Errors/Codes/Frmk/ContextCreation/FRMK-CTX-0006_code" type="xsd:string"/>
        <bpws:variable
            name="CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_msg"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_COMMON/Errors/Codes/Frmk/ContextCreation/FRMK-CTX-0006_msg" type="xsd:string"/>
        <bpws:variable
            name="CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_short_msg"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_COMMON/Errors/Codes/Frmk/ContextCreation/FRMK-CTX-0006_short_msg" type="xsd:string"/>
        <bpws:variable element="ns10:input" name="BE0000-1-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns11:output" name="BE0000-1" sca-bpel:internal="true"/>
        <bpws:variable
            name="CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_code"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_COMMON/Errors/Codes/Frmk/FRMK-TE-0013_code" type="xsd:string"/>
        <bpws:variable
            name="CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_COMMON/Errors/Codes/Frmk/FRMK-TE-0013_msg" type="xsd:string"/>
        <bpws:variable element="ns10:input" name="BE0000-1-1-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns11:output" name="BE0000-1-1" sca-bpel:internal="true"/>
        <bpws:variable element="ns10:input" name="BE0000-1-1-1-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns11:output" name="BE0000-1-1-1" sca-bpel:internal="true"/>
        <bpws:variable element="ns12:bwException"
            name="Generate-Error-Fault-Schema1-Var" sca-bpel:internal="true"/>
        <bpws:variable element="ns10:input" name="BE0001-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns11:output" name="BE0001" sca-bpel:internal="true"/>
        <bpws:variable
            name="CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_code"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_COMMON/Errors/Codes/Frmk/ContextCreation/FRMK-CTX-0007_code" type="xsd:string"/>
        <bpws:variable
            name="CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_msg"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_COMMON/Errors/Codes/Frmk/ContextCreation/FRMK-CTX-0007_msg" type="xsd:string"/>
        <bpws:variable
            name="CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_short_msg"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_COMMON/Errors/Codes/Frmk/ContextCreation/FRMK-CTX-0007_short_msg" type="xsd:string"/>
        <bpws:variable element="ns13:Output" name="End-input"
            sca-bpel:internal="true" tibex:parameter="out"/>
        <bpws:variable name="FaultName" sca-bpel:internal="true" type="xsd:string"/>
        <bpws:variable element="ns:OptionalErrorReport"
            name="_errorOptional" sca-bpel:internal="true"/>
        <bpws:variable
            name="CORE_SERVICE-ProcessUtilities-ManageTraceData-ExchangeCodeNotFoundString"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_SERVICE/ProcessUtilities/ManageTraceData/ExchangeCodeNotFoundString" type="xsd:string"/>
        <bpws:variable name="CORE_COMMON-ResultCode-KO"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="CORE_COMMON/ResultCode/KO" type="xsd:string"/>
        <bpws:variable element="ns14:ActivityErrorData"
            name="_error_Generate-Error-1" sca-bpel:internal="true"/>
        <bpws:variable element="ns14:ActivityErrorData"
            name="_error_Generate-Error-1-1" sca-bpel:internal="true"/>
        <bpws:variable element="ns14:ActivityErrorData"
            name="_error_GE0000" sca-bpel:internal="true"/>
        <bpws:variable element="ns14:ActivityErrorData"
            name="_error_Generate-Error" sca-bpel:internal="true"/>
        <bpws:variable element="ns15:ActivityErrorData"
            name="_error_End" sca-bpel:internal="true"/>
        <bpws:variable element="ns14:ActivityErrorData"
            name="_error_GE0001" sca-bpel:internal="true"/>
    </bpws:variables>
    <bpws:extensions>
        <bpws:extension mustUnderstand="no" namespace="http://www.eclipse.org/gmf/runtime/1.0.2/notation"/>
        <bpws:extension mustUnderstand="no" namespace="http://www.tibco.com/bw/process/info"/>
        <bpws:extension mustUnderstand="no" namespace="http://docs.oasis-open.org/ns/opencsa/sca-bpel/200801"/>
        <bpws:extension mustUnderstand="no" namespace="http://docs.oasis-open.org/ns/opencsa/sca/200912"/>
        <bpws:extension mustUnderstand="no" namespace="http://ns.tibco.com/bw/property"/>
        <bpws:extension mustUnderstand="no" namespace="http://www.tibco.com/bpel/2007/extensions"/>
    </bpws:extensions>
    <bpws:scope name="Ctx_Xml">
        <bpws:flow name="Ctx_Xml">
            <bpws:links>
                <bpws:link name="BE0001-to-GE0001"/>
                <bpws:link name="BE0000-to-GE0000"/>
                <bpws:link name="SetPC_0-to-BE0000"
                    tibex:label="ErrNoPC" tibex:linkType="ERROR"/>
                <bpws:link name="SetPC_0-to-SetPC_0_MsgBody"/>
                <bpws:link name="ParseHeader-to-getTraceData"
                    tibex:label="Error" tibex:linkType="ERROR"/>
                <bpws:link name="End1-to-SetPC_0_MsgBody"/>
                <bpws:link name="SetPC_1-to-BE0000"
                    tibex:label="ErrNoPC" tibex:linkType="ERROR"/>
                <bpws:link name="SetPC_1-to-SetPC_1_MsgBody"/>
                <bpws:link name="SetPC_2-to-BE0000"
                    tibex:label="ErrNoPC" tibex:linkType="ERROR"/>
                <bpws:link name="SetPC_2-to-End1"/>
                <bpws:link name="Start-to-ReadProcessStack"/>
                <bpws:link name="ReadProcessStack-to-ParseHeader"
                    tibex:label="Otherwise" tibex:linkType="SUCCESSWITHNOCONDITION"/>
                <bpws:link name="ReadProcessStack-to-Nothing"
                    tibex:label="no body parsing" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="SetPC_0_MsgBody-to-End"/>
                <bpws:link name="SetPC_1_MsgBody-to-BE0001"/>
                <bpws:link name="SetPC_1_MsgBody-to-BE0000"
                    tibex:label="ErrNoPC" tibex:linkType="ERROR"/>
                <bpws:link name="SetPC_0_MsgBody-to-BE0000"
                    tibex:label="ErrNoPC" tibex:linkType="ERROR"/>
                <bpws:link name="getTraceData-to-SetPC_1"
                    tibex:label="Otherwise" tibex:linkType="SUCCESSWITHNOCONDITION"/>
                <bpws:link name="getTraceData-to-BE0000"
                    tibex:label="Error" tibex:linkType="ERROR"/>
                <bpws:link name="getTraceData-1-to-SetPC_2"
                    tibex:label="Otherwise" tibex:linkType="SUCCESSWITHNOCONDITION"/>
                <bpws:link name="ParseHeader-to-getTraceData-2" tibex:label=""/>
                <bpws:link name="getTraceData-2-to-SetPC_0"
                    tibex:label="Otherwise" tibex:linkType="SUCCESSWITHNOCONDITION"/>
                <bpws:link name="Nothing-to-SetPC_2"
                    tibex:label="Otherwise" tibex:linkType="SUCCESSWITHNOCONDITION"/>
                <bpws:link name="Nothing-to-getTraceData-1"
                    tibex:label="Exchangecode overwrited" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="getTraceData-1-to-BE0000-1"
                    tibex:label="Undeclared Exchange" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="BE0000-1-to-Generate-Error"/>
                <bpws:link name="getTraceData-to-BE0000-1-1"
                    tibex:label="Undeclared Exchange" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="BE0000-1-1-to-Generate-Error-1"/>
                <bpws:link name="getTraceData-2-to-BE0000-1-1-1"
                    tibex:label="Undeclared Exchange" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="BE0000-1-1-1-to-Generate-Error-1-1"/>
            </bpws:links>
            <bpws:extensionActivity>
                <tibex:receiveEvent createInstance="yes"
                    eventTimeout="0" name="Start"
                    tibex:xpdlId="1c49a0b2-d593-4e25-b19a-0ef7df410d37"
                    variable="Start" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:sources>
                        <bpws:source linkName="Start-to-ReadProcessStack"/>
                    </bpws:sources>
                    <tibex:eventSource>
                        <tibex:StartEvent xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                    </tibex:eventSource>
                </tibex:receiveEvent>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/ReadProcessStack-Start-Input.xsd&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:template name=&quot;ReadProcessStack-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:input>&#xa;            &lt;positionFrom>&#xa;                &lt;xsl:value-of select=&quot;&amp;quot;begin&amp;quot;&quot;/>&#xa;            &lt;/positionFrom>&#xa;            &lt;stackMemberPosition>&#xa;                &lt;xsl:value-of select=&quot;1&quot;/>&#xa;            &lt;/stackMemberPosition>&#xa;        &lt;/ansbw6:input>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="ReadProcessStack-input"
                    name="ReadProcessStack"
                    outputVariable="ReadProcessStack"
                    tibex:xpdlId="976e12f1-6b69-4277-99b0-1cc3586d1694"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="Start-to-ReadProcessStack"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="ReadProcessStack-to-ParseHeader">
                            <bpws:transitionCondition><![CDATA[##otherwise##]]></bpws:transitionCondition>
                        </bpws:source>
                        <bpws:source linkName="ReadProcessStack-to-Nothing">
                            <tibex:DesignExpression>
                                <tibex:expression
                                    expression="$Start/noBodyParsing = true()" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition><![CDATA[$Start/noBodyParsing = true()]]></bpws:transitionCondition>
                        </bpws:source>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/ReadProcessStack-Start-Input.xsd&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:template name=&quot;ReadProcessStack-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:input>&#xa;            &lt;positionFrom>&#xa;                &lt;xsl:value-of select=&quot;&amp;quot;begin&amp;quot;&quot;/>&#xa;            &lt;/positionFrom>&#xa;            &lt;stackMemberPosition>&#xa;                &lt;xsl:value-of select=&quot;1&quot;/>&#xa;            &lt;/stackMemberPosition>&#xa;        &lt;/ansbw6:input>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess
                        subProcessName="CORE_COMMON.ProcessUtilities.ErrorHandling.ReadProcessStack" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:activityExtension
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;http://www.tibco.com/namespaces/tnt/plugins/parsexml&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;ParseHeader-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:xmlString>&#xa;            &lt;xsl:value-of select=&quot;$Start/body&quot;/>&#xa;        &lt;/ansbw6:xmlString>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="ParseHeader-input" name="ParseHeader"
                    outputVariable="ParseHeader"
                    tibex:xpdlId="0882fb10-b06f-4a27-b4b4-9aa592b9f187" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="ReadProcessStack-to-ParseHeader"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source
                            linkName="ParseHeader-to-getTraceData"
                            tibex:faultDetailsVar="ParseHeader" tibex:faultNameVar="FaultName">
                            <tibex:DesignExpression>
                                <tibex:expression expression="##error##" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition><![CDATA[##error##]]></bpws:transitionCondition>
                        </bpws:source>
                        <bpws:source linkName="ParseHeader-to-getTraceData-2"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;http://www.tibco.com/namespaces/tnt/plugins/parsexml&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;ParseHeader-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:xmlString>&#xa;            &lt;xsl:value-of select=&quot;$Start/body&quot;/>&#xa;        &lt;/ansbw6:xmlString>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:config>
                        <bwext:BWActivity
                            activityTypeID="bw.xml.parsexml"
                            version="6.0.0.20121128"
                            xmlns:activityconfig="http://tns.tibco.com/bw/model/activityconfig"
                            xmlns:bwext="http://tns.tibco.com/bw/model/core/bwext"
                            xmlns:exttns_xmlMsg="http://soa.coe.com/CommonTypes/Mediation/xmlMsg"
                            xmlns:palettexml="http://ns.tibco.com/bw/palette/xmlpalette" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <activityConfig>
                                <properties name="config" xsi:type="activityconfig:EMFProperty">
                                    <type href="http://ns.tibco.com/bw/palette/xmlpalette#//ParseXml"/>
                                    <value inputStyle="text"
                                    outputElementQName="exttns_xmlMsg:xmlMsg"
                                    validateOutput="true" xsi:type="palettexml:ParseXml"/>
                                </properties>
                            </activityConfig>
                        </bwext:BWActivity>
                    </tibex:config>
                </tibex:activityExtension>
            </bpws:extensionActivity>
            <bpws:empty name="Nothing" tibex:xpdlId="b07faf86-d28c-4b06-a860-4bf6896dac7d">
                <bpws:targets>
                    <bpws:target linkName="ReadProcessStack-to-Nothing"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="Nothing-to-SetPC_2">
                        <bpws:transitionCondition><![CDATA[##otherwise##]]></bpws:transitionCondition>
                    </bpws:source>
                    <bpws:source linkName="Nothing-to-getTraceData-1">
                        <tibex:DesignExpression>
                            <tibex:expression
                                expression="count($Start/overwrite_exchangeCode) > 0" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                        </tibex:DesignExpression>
                        <bpws:transitionCondition><![CDATA[count($Start/overwrite_exchangeCode) > 0]]></bpws:transitionCondition>
                    </bpws:source>
                </bpws:sources>
            </bpws:empty>
            <bpws:extensionActivity>
                <tibex:extActivity
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ManageTraceData/subprocess/GetTraceData-Start-Input.xsd&quot; version=&quot;1.0&quot;>&lt;xsl:param name=&quot;ParseHeader&quot;/>&lt;xsl:param name=&quot;Start&quot;/>&lt;xsl:template name=&quot;getTraceData-2-input&quot; match=&quot;/&quot;>&lt;ansbw6:root>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_exchangeCode) > 0&quot;>&lt;xsl:if test=&quot;$Start/overwrite_exchangeCode&quot;>&lt;exchangecode>&lt;xsl:value-of select=&quot;$Start/overwrite_exchangeCode&quot;/>&lt;/exchangecode>&lt;/xsl:if>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:if test=&quot;not(($ParseHeader/pfx4:msgHeader/ns1:exchangeCode/@xsi:nil=(&amp;quot;true&amp;quot;)) or ($ParseHeader/pfx4:msgHeader/ns1:exchangeCode/@xsi:nil=(&amp;quot;1&amp;quot;)))&quot;>&lt;xsl:if test=&quot;not(($ParseHeader/pfx4:msgHeader/ns1:exchangeCode/@xsi:nil=(&amp;quot;true&amp;quot;)) or ($ParseHeader/pfx4:msgHeader/ns1:exchangeCode/@xsi:nil=(&amp;quot;1&amp;quot;)))&quot;>&lt;exchangecode>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeCode&quot;/>&lt;/exchangecode>&lt;/xsl:if>&lt;/xsl:if>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_serviceCode) > 0&quot;>&lt;xsl:if test=&quot;$Start/overwrite_serviceCode&quot;>&lt;servicecode>&lt;xsl:value-of select=&quot;$Start/overwrite_serviceCode&quot;/>&lt;/servicecode>&lt;/xsl:if>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:if test=&quot;not(($ParseHeader/pfx4:msgHeader/ns1:serviceCode/@xsi:nil=(&amp;quot;true&amp;quot;)) or ($ParseHeader/pfx4:msgHeader/ns1:serviceCode/@xsi:nil=(&amp;quot;1&amp;quot;)))&quot;>&lt;xsl:if test=&quot;not(($ParseHeader/pfx4:msgHeader/ns1:serviceCode/@xsi:nil=(&amp;quot;true&amp;quot;)) or ($ParseHeader/pfx4:msgHeader/ns1:serviceCode/@xsi:nil=(&amp;quot;1&amp;quot;)))&quot;>&lt;servicecode>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:serviceCode&quot;/>&lt;/servicecode>&lt;/xsl:if>&lt;/xsl:if>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ansbw6:root>&lt;/xsl:template>&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="getTraceData-2-input"
                    name="getTraceData-2"
                    outputVariable="getTraceData-2"
                    tibex:xpdlId="ac0dfd52-157b-4378-acb9-63ff84bd3f61"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="ParseHeader-to-getTraceData-2"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="getTraceData-2-to-SetPC_0">
                            <bpws:transitionCondition><![CDATA[##otherwise##]]></bpws:transitionCondition>
                        </bpws:source>
                        <bpws:source linkName="getTraceData-2-to-BE0000-1-1-1">
                            <tibex:DesignExpression>
                                <tibex:expression
                                    expression="($getTraceData-2/exchangecode = $CORE_SERVICE-ProcessUtilities-ManageTraceData-ExchangeCodeNotFoundString) or ($getTraceData-2/result = $CORE_COMMON-ResultCode-KO)" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition><![CDATA[($getTraceData-2/exchangecode = $CORE_SERVICE-ProcessUtilities-ManageTraceData-ExchangeCodeNotFoundString) or ($getTraceData-2/result = $CORE_COMMON-ResultCode-KO)]]></bpws:transitionCondition>
                        </bpws:source>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ManageTraceData/subprocess/GetTraceData-Start-Input.xsd&quot; version=&quot;1.0&quot;>&lt;xsl:param name=&quot;ParseHeader&quot;/>&lt;xsl:param name=&quot;Start&quot;/>&lt;xsl:template name=&quot;getTraceData-2-input&quot; match=&quot;/&quot;>&lt;ansbw6:root>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_exchangeCode) > 0&quot;>&lt;xsl:if test=&quot;$Start/overwrite_exchangeCode&quot;>&lt;exchangecode>&lt;xsl:value-of select=&quot;$Start/overwrite_exchangeCode&quot;/>&lt;/exchangecode>&lt;/xsl:if>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:if test=&quot;not(($ParseHeader/pfx4:msgHeader/ns1:exchangeCode/@xsi:nil=(&amp;quot;true&amp;quot;)) or ($ParseHeader/pfx4:msgHeader/ns1:exchangeCode/@xsi:nil=(&amp;quot;1&amp;quot;)))&quot;>&lt;xsl:if test=&quot;not(($ParseHeader/pfx4:msgHeader/ns1:exchangeCode/@xsi:nil=(&amp;quot;true&amp;quot;)) or ($ParseHeader/pfx4:msgHeader/ns1:exchangeCode/@xsi:nil=(&amp;quot;1&amp;quot;)))&quot;>&lt;exchangecode>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeCode&quot;/>&lt;/exchangecode>&lt;/xsl:if>&lt;/xsl:if>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_serviceCode) > 0&quot;>&lt;xsl:if test=&quot;$Start/overwrite_serviceCode&quot;>&lt;servicecode>&lt;xsl:value-of select=&quot;$Start/overwrite_serviceCode&quot;/>&lt;/servicecode>&lt;/xsl:if>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:if test=&quot;not(($ParseHeader/pfx4:msgHeader/ns1:serviceCode/@xsi:nil=(&amp;quot;true&amp;quot;)) or ($ParseHeader/pfx4:msgHeader/ns1:serviceCode/@xsi:nil=(&amp;quot;1&amp;quot;)))&quot;>&lt;xsl:if test=&quot;not(($ParseHeader/pfx4:msgHeader/ns1:serviceCode/@xsi:nil=(&amp;quot;true&amp;quot;)) or ($ParseHeader/pfx4:msgHeader/ns1:serviceCode/@xsi:nil=(&amp;quot;1&amp;quot;)))&quot;>&lt;servicecode>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:serviceCode&quot;/>&lt;/servicecode>&lt;/xsl:if>&lt;/xsl:if>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ansbw6:root>&lt;/xsl:template>&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess
                        subProcessName="CORE_SERVICE.ProcessUtilities.ManageTraceData.subprocess.GetTraceData" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ManageTraceData/subprocess/GetTraceData-Start-Input.xsd&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;getTraceData-1-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:root>&#xa;            &lt;xsl:choose>&#xa;                &lt;xsl:when test=&quot;count($Start/overwrite_exchangeCode) > 0&quot;>&#xa;                    &lt;xsl:if test=&quot;$Start/overwrite_exchangeCode&quot;>&#xa;                        &lt;exchangecode>&#xa;                            &lt;xsl:value-of select=&quot;$Start/overwrite_exchangeCode&quot;/>&#xa;                        &lt;/exchangecode>&#xa;                    &lt;/xsl:if>&#xa;                    &lt;xsl:if test=&quot;$Start/overwrite_serviceCode&quot;>&#xa;                        &lt;servicecode>&#xa;                            &lt;xsl:value-of select=&quot;$Start/overwrite_serviceCode&quot;/>&#xa;                        &lt;/servicecode>&#xa;                    &lt;/xsl:if>&#xa;                &lt;/xsl:when>&#xa;                &lt;xsl:otherwise>&#xa;                    &lt;exchangecode>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;                    &lt;/exchangecode>&#xa;                    &lt;servicecode>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;                    &lt;/servicecode>&#xa;                &lt;/xsl:otherwise>&#xa;            &lt;/xsl:choose>&#xa;        &lt;/ansbw6:root>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="getTraceData-1-input"
                    name="getTraceData-1"
                    outputVariable="getTraceData-1"
                    tibex:xpdlId="7781e69b-732d-4971-ba55-526f76e22566"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="Nothing-to-getTraceData-1"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="getTraceData-1-to-SetPC_2">
                            <bpws:transitionCondition><![CDATA[##otherwise##]]></bpws:transitionCondition>
                        </bpws:source>
                        <bpws:source linkName="getTraceData-1-to-BE0000-1">
                            <tibex:DesignExpression>
                                <tibex:expression
                                    expression="($getTraceData-1/exchangecode = $CORE_SERVICE-ProcessUtilities-ManageTraceData-ExchangeCodeNotFoundString) or ($getTraceData-1/result = $CORE_COMMON-ResultCode-KO)" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition><![CDATA[($getTraceData-1/exchangecode = $CORE_SERVICE-ProcessUtilities-ManageTraceData-ExchangeCodeNotFoundString) or ($getTraceData-1/result = $CORE_COMMON-ResultCode-KO)]]></bpws:transitionCondition>
                        </bpws:source>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ManageTraceData/subprocess/GetTraceData-Start-Input.xsd&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;getTraceData-1-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:root>&#xa;            &lt;xsl:choose>&#xa;                &lt;xsl:when test=&quot;count($Start/overwrite_exchangeCode) > 0&quot;>&#xa;                    &lt;xsl:if test=&quot;$Start/overwrite_exchangeCode&quot;>&#xa;                        &lt;exchangecode>&#xa;                            &lt;xsl:value-of select=&quot;$Start/overwrite_exchangeCode&quot;/>&#xa;                        &lt;/exchangecode>&#xa;                    &lt;/xsl:if>&#xa;                    &lt;xsl:if test=&quot;$Start/overwrite_serviceCode&quot;>&#xa;                        &lt;servicecode>&#xa;                            &lt;xsl:value-of select=&quot;$Start/overwrite_serviceCode&quot;/>&#xa;                        &lt;/servicecode>&#xa;                    &lt;/xsl:if>&#xa;                &lt;/xsl:when>&#xa;                &lt;xsl:otherwise>&#xa;                    &lt;exchangecode>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;                    &lt;/exchangecode>&#xa;                    &lt;servicecode>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;                    &lt;/servicecode>&#xa;                &lt;/xsl:otherwise>&#xa;            &lt;/xsl:choose>&#xa;        &lt;/ansbw6:root>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess
                        subProcessName="CORE_SERVICE.ProcessUtilities.ManageTraceData.subprocess.GetTraceData" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ManageTraceData/subprocess/GetTraceData-Start-Input.xsd&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;getTraceData-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:root>&#xa;            &lt;xsl:choose>&#xa;                &lt;xsl:when test=&quot;count($Start/overwrite_exchangeCode) > 0&quot;>&#xa;                    &lt;xsl:if test=&quot;$Start/overwrite_exchangeCode&quot;>&#xa;                        &lt;exchangecode>&#xa;                            &lt;xsl:value-of select=&quot;$Start/overwrite_exchangeCode&quot;/>&#xa;                        &lt;/exchangecode>&#xa;                    &lt;/xsl:if>&#xa;                    &lt;xsl:if test=&quot;$Start/overwrite_serviceCode&quot;>&#xa;                        &lt;servicecode>&#xa;                            &lt;xsl:value-of select=&quot;$Start/overwrite_serviceCode&quot;/>&#xa;                        &lt;/servicecode>&#xa;                    &lt;/xsl:if>&#xa;                &lt;/xsl:when>&#xa;                &lt;xsl:otherwise>&#xa;                    &lt;exchangecode>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;                    &lt;/exchangecode>&#xa;                    &lt;servicecode>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;                    &lt;/servicecode>&#xa;                &lt;/xsl:otherwise>&#xa;            &lt;/xsl:choose>&#xa;        &lt;/ansbw6:root>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="getTraceData-input"
                    name="getTraceData" outputVariable="getTraceData"
                    tibex:xpdlId="c7c73d69-a80d-4517-bd1b-d2291fe9c14f"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="ParseHeader-to-getTraceData"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="getTraceData-to-SetPC_1">
                            <bpws:transitionCondition><![CDATA[##otherwise##]]></bpws:transitionCondition>
                        </bpws:source>
                        <bpws:source linkName="getTraceData-to-BE0000"
                            tibex:faultDetailsVar="getTraceData" tibex:faultNameVar="FaultName">
                            <tibex:DesignExpression>
                                <tibex:expression expression="##error##" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition><![CDATA[##error##]]></bpws:transitionCondition>
                        </bpws:source>
                        <bpws:source linkName="getTraceData-to-BE0000-1-1">
                            <tibex:DesignExpression>
                                <tibex:expression
                                    expression="($getTraceData/exchangecode = $CORE_SERVICE-ProcessUtilities-ManageTraceData-ExchangeCodeNotFoundString) or ($getTraceData/result = $CORE_COMMON-ResultCode-KO)" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition><![CDATA[($getTraceData/exchangecode = $CORE_SERVICE-ProcessUtilities-ManageTraceData-ExchangeCodeNotFoundString) or ($getTraceData/result = $CORE_COMMON-ResultCode-KO)]]></bpws:transitionCondition>
                        </bpws:source>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ManageTraceData/subprocess/GetTraceData-Start-Input.xsd&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;getTraceData-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:root>&#xa;            &lt;xsl:choose>&#xa;                &lt;xsl:when test=&quot;count($Start/overwrite_exchangeCode) > 0&quot;>&#xa;                    &lt;xsl:if test=&quot;$Start/overwrite_exchangeCode&quot;>&#xa;                        &lt;exchangecode>&#xa;                            &lt;xsl:value-of select=&quot;$Start/overwrite_exchangeCode&quot;/>&#xa;                        &lt;/exchangecode>&#xa;                    &lt;/xsl:if>&#xa;                    &lt;xsl:if test=&quot;$Start/overwrite_serviceCode&quot;>&#xa;                        &lt;servicecode>&#xa;                            &lt;xsl:value-of select=&quot;$Start/overwrite_serviceCode&quot;/>&#xa;                        &lt;/servicecode>&#xa;                    &lt;/xsl:if>&#xa;                &lt;/xsl:when>&#xa;                &lt;xsl:otherwise>&#xa;                    &lt;exchangecode>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;                    &lt;/exchangecode>&#xa;                    &lt;servicecode>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;                    &lt;/servicecode>&#xa;                &lt;/xsl:otherwise>&#xa;            &lt;/xsl:choose>&#xa;        &lt;/ansbw6:root>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess
                        subProcessName="CORE_SERVICE.ProcessUtilities.ManageTraceData.subprocess.GetTraceData" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ansbw6=&quot;http://tns.tibco.com/bw/model/core/jobSV/1c6d3ff3-5c7d-4c2a-9519-7c932aacba1d&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; version=&quot;1.0&quot;>&lt;xsl:param name=&quot;ReadProcessStack&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;xsl:param name=&quot;getTraceData-1&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&lt;xsl:param name=&quot;Start&quot;/>&lt;xsl:template name=&quot;SetPC_2-input&quot; match=&quot;/&quot;>&lt;ansbw6:root>&lt;xsl:variable name=&quot;v_msgResubmitIndicator&quot; select=&quot;$Start/pfx3:msgProperties/ns:nvpList/ns:nvpElement[@name = &amp;quot;resubmitIndicator&amp;quot;]/@value&quot;/>&lt;xsl:variable name=&quot;v_xmlMsgAction&quot; select=&quot;$Start/pfx3:msgProperties/ns:nvpList/ns:nvpElement[@name = &amp;quot;xmlMsgAction&amp;quot;]/@value&quot;/>&lt;pfx3:processContext>&lt;pfx3:exchangeContext>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_exchangeId) > 0&quot;>&lt;pfx3:exchangeId>&lt;xsl:value-of select=&quot;$Start/overwrite_exchangeId&quot;/>&lt;/pfx3:exchangeId>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:exchangeId>&lt;xsl:value-of select=&quot;bwCustomFunctions:getGUID()&quot;/>&lt;/pfx3:exchangeId>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_serviceId) > 0&quot;>&lt;pfx3:serviceId>&lt;xsl:value-of select=&quot;$Start/overwrite_serviceId&quot;/>&lt;/pfx3:serviceId>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:serviceId>&lt;xsl:value-of select=&quot;bwCustomFunctions:getGUID()&quot;/>&lt;/pfx3:serviceId>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_exchangeCode) > 0&quot;>&lt;pfx3:exchangeCode>&lt;xsl:value-of select=&quot;$Start/overwrite_exchangeCode&quot;/>&lt;/pfx3:exchangeCode>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:exchangeCode>&lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&lt;/pfx3:exchangeCode>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_serviceCode) > 0&quot;>&lt;pfx3:serviceCode>&lt;xsl:value-of select=&quot;$Start/overwrite_serviceCode&quot;/>&lt;/pfx3:serviceCode>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:serviceCode>&lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&lt;/pfx3:serviceCode>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:exchangeVersion xsi:nil=&quot;true&quot;/>&lt;pfx3:componentVersion xsi:nil=&quot;true&quot;/>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData-1/enable_tracing = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$getTraceData-1/enable_tracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData-1/log_msgbody = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$getTraceData-1/log_msgbody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData-1/log_msgconsulting = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$getTraceData-1/log_msgconsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;/pfx3:log_component>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData-1/log_component = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$getTraceData-1/log_component&quot;/>&lt;/pfx3:log_component>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;/pfx3:log_component>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData-1/log_component_error = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$getTraceData-1/log_component_error&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;/>&lt;xsl:when test=&quot;$getTraceData-1/set_start_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData-1/set_start_exchange&quot;>&lt;pfx3:set_Start_Exchange>&lt;xsl:value-of select=&quot;$getTraceData-1/set_start_exchange&quot;/>&lt;/pfx3:set_Start_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;/>&lt;xsl:when test=&quot;$getTraceData-1/set_end_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData-1/set_end_exchange&quot;>&lt;pfx3:set_End_Exchange>&lt;xsl:value-of select=&quot;$getTraceData-1/set_end_exchange&quot;/>&lt;/pfx3:set_End_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;/>&lt;xsl:when test=&quot;$getTraceData-1/set_error_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData-1/set_error_exchange&quot;>&lt;pfx3:set_Error_Exchange>&lt;xsl:value-of select=&quot;$getTraceData-1/set_error_exchange&quot;/>&lt;/pfx3:set_Error_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                        &lt;!--Only the resubmission service can flag this field to true. In case of a resubmission the value is in the xmlmsg header (which holds info on the resubmission). header needs to be parsed  otherwise value is considered as 'FALSE'-->&lt;pfx3:isReplay>&lt;xsl:value-of select=&quot;&amp;quot;F&amp;quot;&quot;/>&lt;/pfx3:isReplay>&lt;pfx3:weight>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    &lt;!-- No way to compute the component's weight since no header data is available on this path ...-->&lt;xsl:value-of select=&quot;1&quot;/>&lt;/pfx3:weight>&lt;pfx3:contextId>&lt;xsl:value-of select=&quot;bwCustomFunctions:getGUID()&quot;/>&lt;/pfx3:contextId>&lt;pfx3:contextTimeStamp>&lt;xsl:value-of select=&quot;current-dateTime()&quot;/>&lt;/pfx3:contextTimeStamp>&lt;pfx3:mainProcessPath>&lt;xsl:value-of select=&quot;$ReadProcessStack/processPath&quot;/>&lt;/pfx3:mainProcessPath>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                &lt;!-- No way to use component's History since no header data is available on this path ...-->&lt;pfx3:History xsi:nil=&quot;true&quot;/>&lt;pfx3:RecvHistory xsi:nil=&quot;true&quot;/>&lt;/pfx3:exchangeContext>&lt;pfx3:messageContext>&lt;pfx3:msgTimestamp xsi:nil=&quot;true&quot;/>&lt;pfx3:messagingType>&lt;xsl:value-of select=&quot;$Start/msgType&quot;/>&lt;/pfx3:messagingType>&lt;pfx3:msgId xsi:nil=&quot;true&quot;/>&lt;pfx3:msgPriority xsi:nil=&quot;true&quot;/>&lt;pfx3:transactionId xsi:nil=&quot;true&quot;/>&lt;pfx3:correlationId xsi:nil=&quot;true&quot;/>&lt;pfx3:sourceSystem xsi:nil=&quot;true&quot;/>&lt;pfx3:privateCtxt xsi:nil=&quot;true&quot;/>&lt;xsl:copy-of select=&quot;$Start/pfx3:msgProperties&quot; copy-namespaces=&quot;no&quot;/>&lt;pfx3:msgBatchInfo xsi:nil=&quot;true&quot;/>&lt;xsl:choose>&lt;xsl:when test=&quot;count($v_xmlMsgAction) = 0&quot;>&lt;pfx3:xmlMsgAction xsi:nil=&quot;true&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:xmlMsgAction>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_xmlMsgAction)&quot;>&lt;xsl:value-of select=&quot;$v_xmlMsgAction&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:xmlMsgAction>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($v_msgResubmitIndicator) > 0&quot;>&lt;pfx3:msgResubmitInd>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_msgResubmitIndicator[1])&quot;>&lt;xsl:value-of select=&quot;$v_msgResubmitIndicator[1]&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:msgResubmitInd>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:msgResubmitInd xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:otherSoapHeaders xsi:nil=&quot;true&quot;/>&lt;/pfx3:messageContext>&lt;pfx3:extendedCtx>&lt;xsl:copy-of select=&quot;$Start/overwrite_extendedCtx/*&quot;/>&lt;/pfx3:extendedCtx>&lt;/pfx3:processContext>&lt;/ansbw6:root>&lt;/xsl:template>&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="SetPC_2-input" name="SetPC_2"
                    outputVariable="SetPC_2"
                    tibex:xpdlId="b2937199-b44c-48a7-82de-c89bd446e243"
                    type="bw.internal.setSharedVariable" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="getTraceData-1-to-SetPC_2"/>
                        <bpws:target linkName="Nothing-to-SetPC_2"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="SetPC_2-to-BE0000"
                            tibex:faultDetailsVar="SetPC_2" tibex:faultNameVar="FaultName">
                            <tibex:DesignExpression>
                                <tibex:expression expression="##error##" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition><![CDATA[##error##]]></bpws:transitionCondition>
                        </bpws:source>
                        <bpws:source linkName="SetPC_2-to-End1"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ansbw6=&quot;http://tns.tibco.com/bw/model/core/jobSV/1c6d3ff3-5c7d-4c2a-9519-7c932aacba1d&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; version=&quot;1.0&quot;>&lt;xsl:param name=&quot;ReadProcessStack&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;xsl:param name=&quot;getTraceData-1&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&lt;xsl:param name=&quot;Start&quot;/>&lt;xsl:template name=&quot;SetPC_2-input&quot; match=&quot;/&quot;>&lt;ansbw6:root>&lt;xsl:variable name=&quot;v_msgResubmitIndicator&quot; select=&quot;$Start/pfx3:msgProperties/ns:nvpList/ns:nvpElement[@name = &amp;quot;resubmitIndicator&amp;quot;]/@value&quot;/>&lt;xsl:variable name=&quot;v_xmlMsgAction&quot; select=&quot;$Start/pfx3:msgProperties/ns:nvpList/ns:nvpElement[@name = &amp;quot;xmlMsgAction&amp;quot;]/@value&quot;/>&lt;pfx3:processContext>&lt;pfx3:exchangeContext>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_exchangeId) > 0&quot;>&lt;pfx3:exchangeId>&lt;xsl:value-of select=&quot;$Start/overwrite_exchangeId&quot;/>&lt;/pfx3:exchangeId>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:exchangeId>&lt;xsl:value-of select=&quot;bwCustomFunctions:getGUID()&quot;/>&lt;/pfx3:exchangeId>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_serviceId) > 0&quot;>&lt;pfx3:serviceId>&lt;xsl:value-of select=&quot;$Start/overwrite_serviceId&quot;/>&lt;/pfx3:serviceId>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:serviceId>&lt;xsl:value-of select=&quot;bwCustomFunctions:getGUID()&quot;/>&lt;/pfx3:serviceId>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_exchangeCode) > 0&quot;>&lt;pfx3:exchangeCode>&lt;xsl:value-of select=&quot;$Start/overwrite_exchangeCode&quot;/>&lt;/pfx3:exchangeCode>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:exchangeCode>&lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&lt;/pfx3:exchangeCode>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_serviceCode) > 0&quot;>&lt;pfx3:serviceCode>&lt;xsl:value-of select=&quot;$Start/overwrite_serviceCode&quot;/>&lt;/pfx3:serviceCode>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:serviceCode>&lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&lt;/pfx3:serviceCode>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:exchangeVersion xsi:nil=&quot;true&quot;/>&lt;pfx3:componentVersion xsi:nil=&quot;true&quot;/>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData-1/enable_tracing = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$getTraceData-1/enable_tracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData-1/log_msgbody = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$getTraceData-1/log_msgbody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData-1/log_msgconsulting = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$getTraceData-1/log_msgconsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;/pfx3:log_component>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData-1/log_component = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$getTraceData-1/log_component&quot;/>&lt;/pfx3:log_component>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;/pfx3:log_component>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData-1/log_component_error = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$getTraceData-1/log_component_error&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;/>&lt;xsl:when test=&quot;$getTraceData-1/set_start_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData-1/set_start_exchange&quot;>&lt;pfx3:set_Start_Exchange>&lt;xsl:value-of select=&quot;$getTraceData-1/set_start_exchange&quot;/>&lt;/pfx3:set_Start_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;/>&lt;xsl:when test=&quot;$getTraceData-1/set_end_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData-1/set_end_exchange&quot;>&lt;pfx3:set_End_Exchange>&lt;xsl:value-of select=&quot;$getTraceData-1/set_end_exchange&quot;/>&lt;/pfx3:set_End_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;/>&lt;xsl:when test=&quot;$getTraceData-1/set_error_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData-1/set_error_exchange&quot;>&lt;pfx3:set_Error_Exchange>&lt;xsl:value-of select=&quot;$getTraceData-1/set_error_exchange&quot;/>&lt;/pfx3:set_Error_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                        &lt;!--Only the resubmission service can flag this field to true. In case of a resubmission the value is in the xmlmsg header (which holds info on the resubmission). header needs to be parsed  otherwise value is considered as 'FALSE'-->&lt;pfx3:isReplay>&lt;xsl:value-of select=&quot;&amp;quot;F&amp;quot;&quot;/>&lt;/pfx3:isReplay>&lt;pfx3:weight>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    &lt;!-- No way to compute the component's weight since no header data is available on this path ...-->&lt;xsl:value-of select=&quot;1&quot;/>&lt;/pfx3:weight>&lt;pfx3:contextId>&lt;xsl:value-of select=&quot;bwCustomFunctions:getGUID()&quot;/>&lt;/pfx3:contextId>&lt;pfx3:contextTimeStamp>&lt;xsl:value-of select=&quot;current-dateTime()&quot;/>&lt;/pfx3:contextTimeStamp>&lt;pfx3:mainProcessPath>&lt;xsl:value-of select=&quot;$ReadProcessStack/processPath&quot;/>&lt;/pfx3:mainProcessPath>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                &lt;!-- No way to use component's History since no header data is available on this path ...-->&lt;pfx3:History xsi:nil=&quot;true&quot;/>&lt;pfx3:RecvHistory xsi:nil=&quot;true&quot;/>&lt;/pfx3:exchangeContext>&lt;pfx3:messageContext>&lt;pfx3:msgTimestamp xsi:nil=&quot;true&quot;/>&lt;pfx3:messagingType>&lt;xsl:value-of select=&quot;$Start/msgType&quot;/>&lt;/pfx3:messagingType>&lt;pfx3:msgId xsi:nil=&quot;true&quot;/>&lt;pfx3:msgPriority xsi:nil=&quot;true&quot;/>&lt;pfx3:transactionId xsi:nil=&quot;true&quot;/>&lt;pfx3:correlationId xsi:nil=&quot;true&quot;/>&lt;pfx3:sourceSystem xsi:nil=&quot;true&quot;/>&lt;pfx3:privateCtxt xsi:nil=&quot;true&quot;/>&lt;xsl:copy-of select=&quot;$Start/pfx3:msgProperties&quot; copy-namespaces=&quot;no&quot;/>&lt;pfx3:msgBatchInfo xsi:nil=&quot;true&quot;/>&lt;xsl:choose>&lt;xsl:when test=&quot;count($v_xmlMsgAction) = 0&quot;>&lt;pfx3:xmlMsgAction xsi:nil=&quot;true&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:xmlMsgAction>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_xmlMsgAction)&quot;>&lt;xsl:value-of select=&quot;$v_xmlMsgAction&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:xmlMsgAction>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($v_msgResubmitIndicator) > 0&quot;>&lt;pfx3:msgResubmitInd>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_msgResubmitIndicator[1])&quot;>&lt;xsl:value-of select=&quot;$v_msgResubmitIndicator[1]&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:msgResubmitInd>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:msgResubmitInd xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:otherSoapHeaders xsi:nil=&quot;true&quot;/>&lt;/pfx3:messageContext>&lt;pfx3:extendedCtx>&lt;xsl:copy-of select=&quot;$Start/overwrite_extendedCtx/*&quot;/>&lt;/pfx3:extendedCtx>&lt;/pfx3:processContext>&lt;/ansbw6:root>&lt;/xsl:template>&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:SetSharedVariable inline="true"
                        variableName="CORE_SERVICE.Resources.Variables.Job.ProcessContext" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;!--START COERCIONS-->&#xa;&lt;!-- $ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/*, element, ns6:History -->&#xa;&lt;!--END COERCIONS-->&lt;xsl:stylesheet xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns6=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ansbw6=&quot;http://tns.tibco.com/bw/model/core/jobSV/1c6d3ff3-5c7d-4c2a-9519-7c932aacba1d&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; version=&quot;1.0&quot;>&lt;xsl:import-schema namespace=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; schema-location=&quot;../../../CORE_COMMON/Resources/Schemas/CommonTypes/MsgHeaderTypes.xsd&quot;/>&lt;xsl:param name=&quot;ReadProcessStack&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;xsl:param name=&quot;getTraceData-2&quot;/>&lt;xsl:param name=&quot;ParseHeader&quot;/>&lt;xsl:param name=&quot;Start&quot;/>&lt;xsl:template name=&quot;SetPC_0-input&quot; match=&quot;/&quot;>&lt;ansbw6:root>&lt;xsl:variable name=&quot;v_msgResubmitIndicator&quot; select=&quot;$Start/pfx3:msgProperties/ns:nvpList/ns:nvpElement[@name = &amp;quot;resubmitIndicator&amp;quot;]/@value&quot;/>&lt;xsl:variable name=&quot;v_xmlMsgAction&quot; select=&quot;$Start/pfx3:msgProperties/ns:nvpList/ns:nvpElement[@name = &amp;quot;xmlMsgAction&amp;quot;]/@value&quot;/>&lt;xsl:variable name=&quot;v_exchid&quot; select=&quot;if (count($Start/overwrite_exchangeId) > 0) then $Start/overwrite_exchangeId else (if ($ParseHeader/pfx4:msgHeader/ns1:exchangeId/@xsi:nil) then bwCustomFunctions:getGUID() else $ParseHeader/pfx4:msgHeader/ns1:exchangeId)&quot;/>&lt;xsl:variable name=&quot;v_exchangecode&quot; select=&quot;if (count($Start/overwrite_exchangeCode) > 0) then $Start/overwrite_exchangeCode else $ParseHeader/pfx4:msgHeader/ns1:exchangeCode&quot;/>&lt;xsl:variable name=&quot;v_servicecode&quot; select=&quot;if (count($Start/overwrite_serviceCode) > 0) then $Start/overwrite_serviceCode else $ParseHeader/pfx4:msgHeader/ns1:serviceCode&quot;/>&lt;xsl:variable name=&quot;v_serviceid&quot; select=&quot;if (count($Start/overwrite_serviceId) > 0) then $Start/overwrite_serviceId else (if ($ParseHeader/pfx4:msgHeader/ns1:serviceId/@xsi:nil) then bwCustomFunctions:getGUID() else $ParseHeader/pfx4:msgHeader/ns1:serviceId)&quot;/>&lt;xsl:variable name=&quot;v_weight&quot; select=&quot;if (count($Start/overwrite_div_factor) > 0) then $Start/overwrite_div_factor * $ParseHeader/pfx4:msgHeader/ns1:weight else $ParseHeader/pfx4:msgHeader/ns1:weight&quot;/>&lt;xsl:variable name=&quot;cpt_history_record&quot; select=&quot;count($ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/*[ns6:IsEnabled = &amp;quot;true&amp;quot;]/ns6:HistoryRecord)&quot;/>&lt;pfx3:processContext>&lt;pfx3:exchangeContext>&lt;pfx3:exchangeId>&lt;xsl:value-of select=&quot;$v_exchid&quot;/>&lt;/pfx3:exchangeId>&lt;xsl:choose>&lt;xsl:when test=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryDirection = &amp;quot;Pull&amp;quot;&quot;>&lt;pfx3:serviceId>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryRecord[@HistLevel = $cpt_history_record]/@ServiceID&quot;/>&lt;/pfx3:serviceId>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:serviceId>&lt;xsl:value-of select=&quot;$v_serviceid&quot;/>&lt;/pfx3:serviceId>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:exchangeCode>&lt;xsl:value-of select=&quot;$v_exchangecode&quot;/>&lt;/pfx3:exchangeCode>&lt;xsl:choose>&lt;xsl:when test=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryDirection = &amp;quot;Pull&amp;quot;&quot;>&lt;pfx3:serviceCode>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryRecord[@HistLevel = $cpt_history_record]/@ServiceID&quot;/>&lt;/pfx3:serviceCode>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:serviceCode>&lt;xsl:value-of select=&quot;$v_servicecode&quot;/>&lt;/pfx3:serviceCode>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:exchangeVersion xsi:nil=&quot;true&quot;/>&lt;pfx3:componentVersion xsi:nil=&quot;true&quot;/>&lt;xsl:choose>&lt;xsl:when test=&quot;$getTraceData-2/enable_tracing = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$getTraceData-2/enable_tracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;$getTraceData-2/log_msgbody = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$getTraceData-2/log_msgbody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;$getTraceData-2/log_msgconsulting = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$getTraceData-2/log_msgconsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;$getTraceData-2/log_component = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$getTraceData-2/log_component&quot;/>&lt;/pfx3:log_component>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;/pfx3:log_component>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;$getTraceData-2/log_component_error = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$getTraceData-2/log_component_error&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($getTraceData-2/set_start_exchange) > 0 and $getTraceData-2/set_start_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData-2/set_start_exchange&quot;>&lt;pfx3:set_Start_Exchange>&lt;xsl:value-of select=&quot;$getTraceData-2/set_start_exchange&quot;/>&lt;/pfx3:set_Start_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($getTraceData-2/set_end_exchange) > 0 and $getTraceData-2/set_end_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData-2/set_end_exchange&quot;>&lt;pfx3:set_End_Exchange>&lt;xsl:value-of select=&quot;$getTraceData-2/set_end_exchange&quot;/>&lt;/pfx3:set_End_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($getTraceData-2/set_error_exchange) > 0 and $getTraceData-2/set_error_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData-2/set_error_exchange&quot;>&lt;pfx3:set_Error_Exchange>&lt;xsl:value-of select=&quot;$getTraceData-2/set_error_exchange&quot;/>&lt;/pfx3:set_Error_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&lt;pfx3:isReplay>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:isReplay&quot;/>&lt;/pfx3:isReplay>&lt;xsl:choose>&lt;xsl:when test=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryDirection = &amp;quot;Pull&amp;quot;&quot;>&lt;pfx3:weight>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryRecord[@HistLevel = $cpt_history_record]/@Weight&quot;/>&lt;/pfx3:weight>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:weight>&lt;xsl:value-of select=&quot;$v_weight&quot;/>&lt;/pfx3:weight>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:contextId>&lt;xsl:value-of select=&quot;bwCustomFunctions:getGUID()&quot;/>&lt;/pfx3:contextId>&lt;pfx3:contextTimeStamp>&lt;xsl:value-of select=&quot;current-dateTime()&quot;/>&lt;/pfx3:contextTimeStamp>&lt;pfx3:mainProcessPath>&lt;xsl:value-of select=&quot;$ReadProcessStack/processPath&quot;/>&lt;/pfx3:mainProcessPath>&lt;xsl:choose>&lt;xsl:when test=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryDirection = &amp;quot;Pull&amp;quot;&quot;>&lt;pfx3:History>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                            &lt;!-- The current component has received a RouteBack Data (the routing path needs to be recreated) -->&lt;ns6:IsEnabled>&lt;xsl:value-of select=&quot;true()&quot;/>&lt;/ns6:IsEnabled>&lt;ns6:HistoryDirection>&lt;xsl:value-of select=&quot;&amp;quot;Push&amp;quot;&quot;/>&lt;/ns6:HistoryDirection>&lt;ns6:ExchangeID>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_exchid)&quot;>&lt;xsl:value-of select=&quot;$v_exchid&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ns6:ExchangeID>&lt;ns6:ExchangeCode>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_exchangecode)&quot;>&lt;xsl:value-of select=&quot;$v_exchangecode&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ns6:ExchangeCode>&lt;ns6:ServiceCode>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_servicecode)&quot;>&lt;xsl:value-of select=&quot;$v_servicecode&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ns6:ServiceCode>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryRecord&quot; copy-namespaces=&quot;no&quot;/>&lt;/pfx3:History>&lt;/xsl:when>&lt;xsl:when test=&quot;$cpt_history_record > 0&quot;>&lt;pfx3:History>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                &lt;!-- History was previously activated so historization continues ...-->&lt;ns6:IsEnabled>&lt;xsl:value-of select=&quot;true()&quot;/>&lt;/ns6:IsEnabled>&lt;ns6:HistoryDirection>&lt;xsl:value-of select=&quot;&amp;quot;Push&amp;quot;&quot;/>&lt;/ns6:HistoryDirection>&lt;ns6:ExchangeID>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeId/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeId&quot;/>&lt;/ns6:ExchangeID>&lt;ns6:ExchangeCode>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeCode/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeCode&quot;/>&lt;/ns6:ExchangeCode>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        &lt;!--addition of old history-->&lt;ns6:ServiceCode>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:serviceCode/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:serviceCode&quot;/>&lt;/ns6:ServiceCode>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryRecord&quot; copy-namespaces=&quot;no&quot;/>&lt;ns6:HistoryRecord>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            &lt;!--addition of current component data-->&lt;xsl:attribute name=&quot;HistLevel&quot;>&lt;xsl:value-of select=&quot;$cpt_history_record + 1&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;ServiceCode&quot;>&lt;xsl:value-of select=&quot;$v_servicecode&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;ServiceID&quot;>&lt;xsl:value-of select=&quot;$v_serviceid&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;Weight&quot;>&lt;xsl:value-of select=&quot;$v_weight&quot;/>&lt;/xsl:attribute>&lt;/ns6:HistoryRecord>&lt;/pfx3:History>&lt;/xsl:when>&lt;xsl:when test=&quot;$Start/EnablePathHistory = true()&quot;>&lt;pfx3:History>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    &lt;!-- History is activated From the current component ...-->&lt;ns6:IsEnabled>&lt;xsl:value-of select=&quot;true()&quot;/>&lt;/ns6:IsEnabled>&lt;ns6:HistoryDirection>&lt;xsl:value-of select=&quot;&amp;quot;Push&amp;quot;&quot;/>&lt;/ns6:HistoryDirection>&lt;ns6:ExchangeID>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_exchid)&quot;>&lt;xsl:value-of select=&quot;$v_exchid&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ns6:ExchangeID>&lt;ns6:ExchangeCode>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_exchangecode)&quot;>&lt;xsl:value-of select=&quot;$v_exchangecode&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ns6:ExchangeCode>&lt;ns6:ServiceCode>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_servicecode)&quot;>&lt;xsl:value-of select=&quot;$v_servicecode&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ns6:ServiceCode>&lt;ns6:HistoryRecord>&lt;xsl:attribute name=&quot;HistLevel&quot;>&lt;xsl:value-of select=&quot;1&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;ServiceCode&quot;>&lt;xsl:value-of select=&quot;$v_servicecode&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;ServiceID&quot;>&lt;xsl:value-of select=&quot;$v_serviceid&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;Weight&quot;>&lt;xsl:value-of select=&quot;$v_weight&quot;/>&lt;/xsl:attribute>&lt;/ns6:HistoryRecord>&lt;/pfx3:History>&lt;/xsl:when>&lt;xsl:otherwise>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    &lt;!-- History is set to nill-->&lt;pfx3:History xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:IsEnabled) > 0&quot;>&lt;xsl:for-each select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History[1]&quot;>&lt;pfx3:RecvHistory>&lt;ns6:IsEnabled>&lt;xsl:value-of select=&quot;ns6:IsEnabled&quot;/>&lt;/ns6:IsEnabled>&lt;ns6:HistoryDirection>&lt;xsl:value-of select=&quot;ns6:HistoryDirection&quot;/>&lt;/ns6:HistoryDirection>&lt;ns6:ExchangeID>&lt;xsl:copy-of select=&quot;ns6:ExchangeID/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;ns6:ExchangeID&quot;/>&lt;/ns6:ExchangeID>&lt;ns6:ExchangeCode>&lt;xsl:copy-of select=&quot;ns6:ExchangeCode/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;ns6:ExchangeCode&quot;/>&lt;/ns6:ExchangeCode>&lt;xsl:if test=&quot;ns6:ServiceCode&quot;>&lt;ns6:ServiceCode>&lt;xsl:copy-of select=&quot;ns6:ServiceCode/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;ns6:ServiceCode&quot;/>&lt;/ns6:ServiceCode>&lt;/xsl:if>&lt;xsl:for-each select=&quot;ns6:HistoryRecord&quot;>&lt;ns6:HistoryRecord>&lt;xsl:attribute name=&quot;HistLevel&quot;>&lt;xsl:value-of select=&quot;@HistLevel&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;ServiceCode&quot;>&lt;xsl:value-of select=&quot;@ServiceCode&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;ServiceID&quot;>&lt;xsl:value-of select=&quot;@ServiceID&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;Weight&quot;>&lt;xsl:value-of select=&quot;@Weight&quot;/>&lt;/xsl:attribute>&lt;/ns6:HistoryRecord>&lt;/xsl:for-each>&lt;/pfx3:RecvHistory>&lt;/xsl:for-each>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:RecvHistory xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:exchangeContext>&lt;pfx3:messageContext>&lt;pfx3:msgTimestamp>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:timeStamp/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:timeStamp&quot;/>&lt;/pfx3:msgTimestamp>&lt;pfx3:messagingType>&lt;xsl:value-of select=&quot;$Start/msgType&quot;/>&lt;/pfx3:messagingType>&lt;pfx3:msgId>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:eventId/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:eventId&quot;/>&lt;/pfx3:msgId>&lt;pfx3:msgPriority>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:priority/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:priority&quot;/>&lt;/pfx3:msgPriority>&lt;xsl:choose>&lt;xsl:when test=&quot;count($ParseHeader/pfx4:msgHeader/ns1:transactionId) > 0&quot;>&lt;pfx3:transactionId>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($ParseHeader/pfx4:msgHeader/ns1:transactionId)&quot;>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:transactionId&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:transactionId>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:transactionId xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($ParseHeader/pfx4:msgHeader/ns1:correlationId) > 0&quot;>&lt;pfx3:correlationId>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($ParseHeader/pfx4:msgHeader/ns1:correlationId)&quot;>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:correlationId&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:correlationId>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:correlationId xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:sourceSystem>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:source&quot;/>&lt;/pfx3:sourceSystem>&lt;pfx3:privateCtxt>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:privateCtxt/@*&quot;/>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:privateCtxt/node()&quot;/>&lt;/pfx3:privateCtxt>&lt;xsl:copy-of select=&quot;$Start/pfx3:msgProperties&quot; copy-namespaces=&quot;no&quot;/>&lt;xsl:choose>&lt;xsl:when test=&quot;$ParseHeader/pfx4:msgHeader/ns1:batchInfo/@xsi:nil&quot;>&lt;pfx3:msgBatchInfo xsi:nil=&quot;true&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:msgBatchInfo>&lt;ns6:batchName>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:batchInfo/ns6:batchName/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:batchInfo/ns6:batchName&quot;/>&lt;/ns6:batchName>&lt;ns6:msgNo>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:batchInfo/ns6:msgNo/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:batchInfo/ns6:msgNo&quot;/>&lt;/ns6:msgNo>&lt;ns6:batchSize>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:batchInfo/ns6:batchSize/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:batchInfo/ns6:batchSize&quot;/>&lt;/ns6:batchSize>&lt;/pfx3:msgBatchInfo>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($v_xmlMsgAction) = 0&quot;>&lt;pfx3:xmlMsgAction xsi:nil=&quot;true&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:xmlMsgAction>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_xmlMsgAction)&quot;>&lt;xsl:value-of select=&quot;$v_xmlMsgAction&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:xmlMsgAction>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($v_msgResubmitIndicator) > 0&quot;>&lt;pfx3:msgResubmitInd>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_msgResubmitIndicator[1])&quot;>&lt;xsl:value-of select=&quot;$v_msgResubmitIndicator[1]&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:msgResubmitInd>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:msgResubmitInd xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:otherSoapHeaders xsi:nil=&quot;true&quot;/>&lt;/pfx3:messageContext>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_extendedCtx) > 0&quot;>&lt;pfx3:extendedCtx>&lt;xsl:copy-of select=&quot;$Start/overwrite_extendedCtx/*&quot;/>&lt;/pfx3:extendedCtx>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:choose>&lt;xsl:when test=&quot;count($ParseHeader/pfx4:msgHeader/ns1:extendedCtx) > 0&quot;>&lt;pfx3:extendedCtx>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:extendedCtx/*&quot;/>&lt;/pfx3:extendedCtx>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:extendedCtx xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:processContext>&lt;/ansbw6:root>&lt;/xsl:template>&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="SetPC_0-input" name="SetPC_0"
                    outputVariable="SetPC_0"
                    tibex:xpdlId="e9ecaa7f-a670-43f1-ad81-e655521f641b"
                    type="bw.internal.setSharedVariable" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="getTraceData-2-to-SetPC_0"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="SetPC_0-to-BE0000"
                            tibex:faultDetailsVar="SetPC_0" tibex:faultNameVar="FaultName">
                            <tibex:DesignExpression>
                                <tibex:expression expression="##error##" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition><![CDATA[##error##]]></bpws:transitionCondition>
                        </bpws:source>
                        <bpws:source linkName="SetPC_0-to-SetPC_0_MsgBody"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;!--START COERCIONS-->&#xa;&lt;!-- $ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/*, element, ns6:History -->&#xa;&lt;!--END COERCIONS-->&lt;xsl:stylesheet xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns6=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ansbw6=&quot;http://tns.tibco.com/bw/model/core/jobSV/1c6d3ff3-5c7d-4c2a-9519-7c932aacba1d&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; version=&quot;1.0&quot;>&lt;xsl:import-schema namespace=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; schema-location=&quot;../../../CORE_COMMON/Resources/Schemas/CommonTypes/MsgHeaderTypes.xsd&quot;/>&lt;xsl:param name=&quot;ReadProcessStack&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;xsl:param name=&quot;getTraceData-2&quot;/>&lt;xsl:param name=&quot;ParseHeader&quot;/>&lt;xsl:param name=&quot;Start&quot;/>&lt;xsl:template name=&quot;SetPC_0-input&quot; match=&quot;/&quot;>&lt;ansbw6:root>&lt;xsl:variable name=&quot;v_msgResubmitIndicator&quot; select=&quot;$Start/pfx3:msgProperties/ns:nvpList/ns:nvpElement[@name = &amp;quot;resubmitIndicator&amp;quot;]/@value&quot;/>&lt;xsl:variable name=&quot;v_xmlMsgAction&quot; select=&quot;$Start/pfx3:msgProperties/ns:nvpList/ns:nvpElement[@name = &amp;quot;xmlMsgAction&amp;quot;]/@value&quot;/>&lt;xsl:variable name=&quot;v_exchid&quot; select=&quot;if (count($Start/overwrite_exchangeId) > 0) then $Start/overwrite_exchangeId else (if ($ParseHeader/pfx4:msgHeader/ns1:exchangeId/@xsi:nil) then bwCustomFunctions:getGUID() else $ParseHeader/pfx4:msgHeader/ns1:exchangeId)&quot;/>&lt;xsl:variable name=&quot;v_exchangecode&quot; select=&quot;if (count($Start/overwrite_exchangeCode) > 0) then $Start/overwrite_exchangeCode else $ParseHeader/pfx4:msgHeader/ns1:exchangeCode&quot;/>&lt;xsl:variable name=&quot;v_servicecode&quot; select=&quot;if (count($Start/overwrite_serviceCode) > 0) then $Start/overwrite_serviceCode else $ParseHeader/pfx4:msgHeader/ns1:serviceCode&quot;/>&lt;xsl:variable name=&quot;v_serviceid&quot; select=&quot;if (count($Start/overwrite_serviceId) > 0) then $Start/overwrite_serviceId else (if ($ParseHeader/pfx4:msgHeader/ns1:serviceId/@xsi:nil) then bwCustomFunctions:getGUID() else $ParseHeader/pfx4:msgHeader/ns1:serviceId)&quot;/>&lt;xsl:variable name=&quot;v_weight&quot; select=&quot;if (count($Start/overwrite_div_factor) > 0) then $Start/overwrite_div_factor * $ParseHeader/pfx4:msgHeader/ns1:weight else $ParseHeader/pfx4:msgHeader/ns1:weight&quot;/>&lt;xsl:variable name=&quot;cpt_history_record&quot; select=&quot;count($ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/*[ns6:IsEnabled = &amp;quot;true&amp;quot;]/ns6:HistoryRecord)&quot;/>&lt;pfx3:processContext>&lt;pfx3:exchangeContext>&lt;pfx3:exchangeId>&lt;xsl:value-of select=&quot;$v_exchid&quot;/>&lt;/pfx3:exchangeId>&lt;xsl:choose>&lt;xsl:when test=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryDirection = &amp;quot;Pull&amp;quot;&quot;>&lt;pfx3:serviceId>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryRecord[@HistLevel = $cpt_history_record]/@ServiceID&quot;/>&lt;/pfx3:serviceId>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:serviceId>&lt;xsl:value-of select=&quot;$v_serviceid&quot;/>&lt;/pfx3:serviceId>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:exchangeCode>&lt;xsl:value-of select=&quot;$v_exchangecode&quot;/>&lt;/pfx3:exchangeCode>&lt;xsl:choose>&lt;xsl:when test=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryDirection = &amp;quot;Pull&amp;quot;&quot;>&lt;pfx3:serviceCode>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryRecord[@HistLevel = $cpt_history_record]/@ServiceID&quot;/>&lt;/pfx3:serviceCode>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:serviceCode>&lt;xsl:value-of select=&quot;$v_servicecode&quot;/>&lt;/pfx3:serviceCode>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:exchangeVersion xsi:nil=&quot;true&quot;/>&lt;pfx3:componentVersion xsi:nil=&quot;true&quot;/>&lt;xsl:choose>&lt;xsl:when test=&quot;$getTraceData-2/enable_tracing = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$getTraceData-2/enable_tracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;$getTraceData-2/log_msgbody = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$getTraceData-2/log_msgbody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;$getTraceData-2/log_msgconsulting = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$getTraceData-2/log_msgconsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;$getTraceData-2/log_component = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$getTraceData-2/log_component&quot;/>&lt;/pfx3:log_component>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;/pfx3:log_component>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;$getTraceData-2/log_component_error = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$getTraceData-2/log_component_error&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($getTraceData-2/set_start_exchange) > 0 and $getTraceData-2/set_start_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData-2/set_start_exchange&quot;>&lt;pfx3:set_Start_Exchange>&lt;xsl:value-of select=&quot;$getTraceData-2/set_start_exchange&quot;/>&lt;/pfx3:set_Start_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($getTraceData-2/set_end_exchange) > 0 and $getTraceData-2/set_end_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData-2/set_end_exchange&quot;>&lt;pfx3:set_End_Exchange>&lt;xsl:value-of select=&quot;$getTraceData-2/set_end_exchange&quot;/>&lt;/pfx3:set_End_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($getTraceData-2/set_error_exchange) > 0 and $getTraceData-2/set_error_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData-2/set_error_exchange&quot;>&lt;pfx3:set_Error_Exchange>&lt;xsl:value-of select=&quot;$getTraceData-2/set_error_exchange&quot;/>&lt;/pfx3:set_Error_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&lt;pfx3:isReplay>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:isReplay&quot;/>&lt;/pfx3:isReplay>&lt;xsl:choose>&lt;xsl:when test=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryDirection = &amp;quot;Pull&amp;quot;&quot;>&lt;pfx3:weight>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryRecord[@HistLevel = $cpt_history_record]/@Weight&quot;/>&lt;/pfx3:weight>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:weight>&lt;xsl:value-of select=&quot;$v_weight&quot;/>&lt;/pfx3:weight>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:contextId>&lt;xsl:value-of select=&quot;bwCustomFunctions:getGUID()&quot;/>&lt;/pfx3:contextId>&lt;pfx3:contextTimeStamp>&lt;xsl:value-of select=&quot;current-dateTime()&quot;/>&lt;/pfx3:contextTimeStamp>&lt;pfx3:mainProcessPath>&lt;xsl:value-of select=&quot;$ReadProcessStack/processPath&quot;/>&lt;/pfx3:mainProcessPath>&lt;xsl:choose>&lt;xsl:when test=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryDirection = &amp;quot;Pull&amp;quot;&quot;>&lt;pfx3:History>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                            &lt;!-- The current component has received a RouteBack Data (the routing path needs to be recreated) -->&lt;ns6:IsEnabled>&lt;xsl:value-of select=&quot;true()&quot;/>&lt;/ns6:IsEnabled>&lt;ns6:HistoryDirection>&lt;xsl:value-of select=&quot;&amp;quot;Push&amp;quot;&quot;/>&lt;/ns6:HistoryDirection>&lt;ns6:ExchangeID>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_exchid)&quot;>&lt;xsl:value-of select=&quot;$v_exchid&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ns6:ExchangeID>&lt;ns6:ExchangeCode>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_exchangecode)&quot;>&lt;xsl:value-of select=&quot;$v_exchangecode&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ns6:ExchangeCode>&lt;ns6:ServiceCode>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_servicecode)&quot;>&lt;xsl:value-of select=&quot;$v_servicecode&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ns6:ServiceCode>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryRecord&quot; copy-namespaces=&quot;no&quot;/>&lt;/pfx3:History>&lt;/xsl:when>&lt;xsl:when test=&quot;$cpt_history_record > 0&quot;>&lt;pfx3:History>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                &lt;!-- History was previously activated so historization continues ...-->&lt;ns6:IsEnabled>&lt;xsl:value-of select=&quot;true()&quot;/>&lt;/ns6:IsEnabled>&lt;ns6:HistoryDirection>&lt;xsl:value-of select=&quot;&amp;quot;Push&amp;quot;&quot;/>&lt;/ns6:HistoryDirection>&lt;ns6:ExchangeID>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeId/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeId&quot;/>&lt;/ns6:ExchangeID>&lt;ns6:ExchangeCode>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeCode/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeCode&quot;/>&lt;/ns6:ExchangeCode>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        &lt;!--addition of old history-->&lt;ns6:ServiceCode>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:serviceCode/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:serviceCode&quot;/>&lt;/ns6:ServiceCode>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:HistoryRecord&quot; copy-namespaces=&quot;no&quot;/>&lt;ns6:HistoryRecord>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            &lt;!--addition of current component data-->&lt;xsl:attribute name=&quot;HistLevel&quot;>&lt;xsl:value-of select=&quot;$cpt_history_record + 1&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;ServiceCode&quot;>&lt;xsl:value-of select=&quot;$v_servicecode&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;ServiceID&quot;>&lt;xsl:value-of select=&quot;$v_serviceid&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;Weight&quot;>&lt;xsl:value-of select=&quot;$v_weight&quot;/>&lt;/xsl:attribute>&lt;/ns6:HistoryRecord>&lt;/pfx3:History>&lt;/xsl:when>&lt;xsl:when test=&quot;$Start/EnablePathHistory = true()&quot;>&lt;pfx3:History>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    &lt;!-- History is activated From the current component ...-->&lt;ns6:IsEnabled>&lt;xsl:value-of select=&quot;true()&quot;/>&lt;/ns6:IsEnabled>&lt;ns6:HistoryDirection>&lt;xsl:value-of select=&quot;&amp;quot;Push&amp;quot;&quot;/>&lt;/ns6:HistoryDirection>&lt;ns6:ExchangeID>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_exchid)&quot;>&lt;xsl:value-of select=&quot;$v_exchid&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ns6:ExchangeID>&lt;ns6:ExchangeCode>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_exchangecode)&quot;>&lt;xsl:value-of select=&quot;$v_exchangecode&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ns6:ExchangeCode>&lt;ns6:ServiceCode>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_servicecode)&quot;>&lt;xsl:value-of select=&quot;$v_servicecode&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ns6:ServiceCode>&lt;ns6:HistoryRecord>&lt;xsl:attribute name=&quot;HistLevel&quot;>&lt;xsl:value-of select=&quot;1&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;ServiceCode&quot;>&lt;xsl:value-of select=&quot;$v_servicecode&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;ServiceID&quot;>&lt;xsl:value-of select=&quot;$v_serviceid&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;Weight&quot;>&lt;xsl:value-of select=&quot;$v_weight&quot;/>&lt;/xsl:attribute>&lt;/ns6:HistoryRecord>&lt;/pfx3:History>&lt;/xsl:when>&lt;xsl:otherwise>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    &lt;!-- History is set to nill-->&lt;pfx3:History xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History/ns6:IsEnabled) > 0&quot;>&lt;xsl:for-each select=&quot;$ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/ns6:History[1]&quot;>&lt;pfx3:RecvHistory>&lt;ns6:IsEnabled>&lt;xsl:value-of select=&quot;ns6:IsEnabled&quot;/>&lt;/ns6:IsEnabled>&lt;ns6:HistoryDirection>&lt;xsl:value-of select=&quot;ns6:HistoryDirection&quot;/>&lt;/ns6:HistoryDirection>&lt;ns6:ExchangeID>&lt;xsl:copy-of select=&quot;ns6:ExchangeID/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;ns6:ExchangeID&quot;/>&lt;/ns6:ExchangeID>&lt;ns6:ExchangeCode>&lt;xsl:copy-of select=&quot;ns6:ExchangeCode/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;ns6:ExchangeCode&quot;/>&lt;/ns6:ExchangeCode>&lt;xsl:if test=&quot;ns6:ServiceCode&quot;>&lt;ns6:ServiceCode>&lt;xsl:copy-of select=&quot;ns6:ServiceCode/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;ns6:ServiceCode&quot;/>&lt;/ns6:ServiceCode>&lt;/xsl:if>&lt;xsl:for-each select=&quot;ns6:HistoryRecord&quot;>&lt;ns6:HistoryRecord>&lt;xsl:attribute name=&quot;HistLevel&quot;>&lt;xsl:value-of select=&quot;@HistLevel&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;ServiceCode&quot;>&lt;xsl:value-of select=&quot;@ServiceCode&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;ServiceID&quot;>&lt;xsl:value-of select=&quot;@ServiceID&quot;/>&lt;/xsl:attribute>&lt;xsl:attribute name=&quot;Weight&quot;>&lt;xsl:value-of select=&quot;@Weight&quot;/>&lt;/xsl:attribute>&lt;/ns6:HistoryRecord>&lt;/xsl:for-each>&lt;/pfx3:RecvHistory>&lt;/xsl:for-each>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:RecvHistory xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:exchangeContext>&lt;pfx3:messageContext>&lt;pfx3:msgTimestamp>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:timeStamp/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:timeStamp&quot;/>&lt;/pfx3:msgTimestamp>&lt;pfx3:messagingType>&lt;xsl:value-of select=&quot;$Start/msgType&quot;/>&lt;/pfx3:messagingType>&lt;pfx3:msgId>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:eventId/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:eventId&quot;/>&lt;/pfx3:msgId>&lt;pfx3:msgPriority>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:priority/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:priority&quot;/>&lt;/pfx3:msgPriority>&lt;xsl:choose>&lt;xsl:when test=&quot;count($ParseHeader/pfx4:msgHeader/ns1:transactionId) > 0&quot;>&lt;pfx3:transactionId>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($ParseHeader/pfx4:msgHeader/ns1:transactionId)&quot;>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:transactionId&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:transactionId>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:transactionId xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($ParseHeader/pfx4:msgHeader/ns1:correlationId) > 0&quot;>&lt;pfx3:correlationId>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($ParseHeader/pfx4:msgHeader/ns1:correlationId)&quot;>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:correlationId&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:correlationId>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:correlationId xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:sourceSystem>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:source&quot;/>&lt;/pfx3:sourceSystem>&lt;pfx3:privateCtxt>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:privateCtxt/@*&quot;/>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:privateCtxt/node()&quot;/>&lt;/pfx3:privateCtxt>&lt;xsl:copy-of select=&quot;$Start/pfx3:msgProperties&quot; copy-namespaces=&quot;no&quot;/>&lt;xsl:choose>&lt;xsl:when test=&quot;$ParseHeader/pfx4:msgHeader/ns1:batchInfo/@xsi:nil&quot;>&lt;pfx3:msgBatchInfo xsi:nil=&quot;true&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:msgBatchInfo>&lt;ns6:batchName>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:batchInfo/ns6:batchName/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:batchInfo/ns6:batchName&quot;/>&lt;/ns6:batchName>&lt;ns6:msgNo>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:batchInfo/ns6:msgNo/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:batchInfo/ns6:msgNo&quot;/>&lt;/ns6:msgNo>&lt;ns6:batchSize>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:batchInfo/ns6:batchSize/@xsi:nil&quot;/>&lt;xsl:value-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:batchInfo/ns6:batchSize&quot;/>&lt;/ns6:batchSize>&lt;/pfx3:msgBatchInfo>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($v_xmlMsgAction) = 0&quot;>&lt;pfx3:xmlMsgAction xsi:nil=&quot;true&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:xmlMsgAction>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_xmlMsgAction)&quot;>&lt;xsl:value-of select=&quot;$v_xmlMsgAction&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:xmlMsgAction>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($v_msgResubmitIndicator) > 0&quot;>&lt;pfx3:msgResubmitInd>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_msgResubmitIndicator[1])&quot;>&lt;xsl:value-of select=&quot;$v_msgResubmitIndicator[1]&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:msgResubmitInd>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:msgResubmitInd xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:otherSoapHeaders xsi:nil=&quot;true&quot;/>&lt;/pfx3:messageContext>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_extendedCtx) > 0&quot;>&lt;pfx3:extendedCtx>&lt;xsl:copy-of select=&quot;$Start/overwrite_extendedCtx/*&quot;/>&lt;/pfx3:extendedCtx>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:choose>&lt;xsl:when test=&quot;count($ParseHeader/pfx4:msgHeader/ns1:extendedCtx) > 0&quot;>&lt;pfx3:extendedCtx>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:msgHeader/ns1:extendedCtx/*&quot;/>&lt;/pfx3:extendedCtx>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:extendedCtx xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:processContext>&lt;/ansbw6:root>&lt;/xsl:template>&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:SetSharedVariable inline="true"
                        variableName="CORE_SERVICE.Resources.Variables.Job.ProcessContext" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ansbw6=&quot;http://tns.tibco.com/bw/model/core/jobSV/1c6d3ff3-5c7d-4c2a-9519-7c932aacba1d&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; version=&quot;1.0&quot;>&lt;xsl:param name=&quot;ReadProcessStack&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;xsl:param name=&quot;getTraceData&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&lt;xsl:param name=&quot;Start&quot;/>&lt;xsl:template name=&quot;SetPC_1-input&quot; match=&quot;/&quot;>&lt;ansbw6:root>&lt;xsl:variable name=&quot;v_msgResubmitIndicator&quot; select=&quot;$Start/pfx3:msgProperties/ns:nvpList/ns:nvpElement[@name = &amp;quot;resubmitIndicator&amp;quot;]/@value&quot;/>&lt;xsl:variable name=&quot;v_xmlMsgAction&quot; select=&quot;$Start/pfx3:msgProperties/ns:nvpList/ns:nvpElement[@name = &amp;quot;xmlMsgAction&amp;quot;]/@value&quot;/>&lt;pfx3:processContext>&lt;pfx3:exchangeContext>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_exchangeId) > 0&quot;>&lt;pfx3:exchangeId>&lt;xsl:value-of select=&quot;$Start/overwrite_exchangeId&quot;/>&lt;/pfx3:exchangeId>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:exchangeId>&lt;xsl:value-of select=&quot;bwCustomFunctions:getGUID()&quot;/>&lt;/pfx3:exchangeId>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_serviceId) > 0&quot;>&lt;pfx3:serviceId>&lt;xsl:value-of select=&quot;$Start/overwrite_serviceId&quot;/>&lt;/pfx3:serviceId>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:serviceId>&lt;xsl:value-of select=&quot;bwCustomFunctions:getGUID()&quot;/>&lt;/pfx3:serviceId>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_exchangeCode) > 0&quot;>&lt;pfx3:exchangeCode>&lt;xsl:value-of select=&quot;$Start/overwrite_exchangeCode&quot;/>&lt;/pfx3:exchangeCode>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:exchangeCode>&lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&lt;/pfx3:exchangeCode>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_serviceCode) > 0&quot;>&lt;pfx3:serviceCode>&lt;xsl:value-of select=&quot;$Start/overwrite_serviceCode&quot;/>&lt;/pfx3:serviceCode>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:serviceCode>&lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&lt;/pfx3:serviceCode>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:exchangeVersion xsi:nil=&quot;true&quot;/>&lt;pfx3:componentVersion xsi:nil=&quot;true&quot;/>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData/enable_tracing = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$getTraceData/enable_tracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData/log_msgbody = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$getTraceData/log_msgbody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData/log_msgconsulting = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$getTraceData/log_msgconsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;/pfx3:log_component>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData/log_component = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$getTraceData/log_component&quot;/>&lt;/pfx3:log_component>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;/pfx3:log_component>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData/log_component_error = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$getTraceData/log_component_error&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;/>&lt;xsl:when test=&quot;$getTraceData/set_start_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData/set_start_exchange&quot;>&lt;pfx3:set_Start_Exchange>&lt;xsl:value-of select=&quot;$getTraceData/set_start_exchange&quot;/>&lt;/pfx3:set_Start_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;/>&lt;xsl:when test=&quot;$getTraceData/set_end_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData/set_end_exchange&quot;>&lt;pfx3:set_End_Exchange>&lt;xsl:value-of select=&quot;$getTraceData/set_end_exchange&quot;/>&lt;/pfx3:set_End_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;/>&lt;xsl:when test=&quot;$getTraceData/set_error_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData/set_error_exchange&quot;>&lt;pfx3:set_Error_Exchange>&lt;xsl:value-of select=&quot;$getTraceData/set_error_exchange&quot;/>&lt;/pfx3:set_Error_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                        &lt;!--Only the resubmission service can flag this field to true. In case of a resubmission the value is in the xmlmsg header (which holds info on the resubmission). header needs to be parsed  otherwise value is considered as 'FALSE'-->&lt;pfx3:isReplay>&lt;xsl:value-of select=&quot;&amp;quot;F&amp;quot;&quot;/>&lt;/pfx3:isReplay>&lt;pfx3:weight>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    &lt;!--It is not possible to get the real weight since no header is recoverable. Weight is defaulted to 100-->&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    &lt;!--A major point is the following:this an error path so a logOnError should be used in the code to log the error and no endexchange computing should be triggered upon the reception of this weight-->&lt;xsl:value-of select=&quot;100&quot;/>&lt;/pfx3:weight>&lt;pfx3:contextId>&lt;xsl:value-of select=&quot;bwCustomFunctions:getGUID()&quot;/>&lt;/pfx3:contextId>&lt;pfx3:contextTimeStamp>&lt;xsl:value-of select=&quot;current-dateTime()&quot;/>&lt;/pfx3:contextTimeStamp>&lt;pfx3:mainProcessPath>&lt;xsl:value-of select=&quot;$ReadProcessStack/processPath&quot;/>&lt;/pfx3:mainProcessPath>&lt;pfx3:History xsi:nil=&quot;true&quot;/>&lt;pfx3:RecvHistory xsi:nil=&quot;true&quot;/>&lt;/pfx3:exchangeContext>&lt;pfx3:messageContext>&lt;pfx3:msgTimestamp xsi:nil=&quot;true&quot;/>&lt;pfx3:messagingType>&lt;xsl:value-of select=&quot;$Start/msgType&quot;/>&lt;/pfx3:messagingType>&lt;pfx3:msgId xsi:nil=&quot;true&quot;/>&lt;pfx3:msgPriority xsi:nil=&quot;true&quot;/>&lt;pfx3:transactionId xsi:nil=&quot;true&quot;/>&lt;pfx3:correlationId xsi:nil=&quot;true&quot;/>&lt;pfx3:sourceSystem xsi:nil=&quot;true&quot;/>&lt;pfx3:privateCtxt xsi:nil=&quot;true&quot;/>&lt;xsl:copy-of select=&quot;$Start/pfx3:msgProperties&quot; copy-namespaces=&quot;no&quot;/>&lt;pfx3:msgBatchInfo xsi:nil=&quot;true&quot;/>&lt;xsl:choose>&lt;xsl:when test=&quot;count($v_xmlMsgAction) = 0&quot;>&lt;pfx3:xmlMsgAction xsi:nil=&quot;true&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:xmlMsgAction>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_xmlMsgAction)&quot;>&lt;xsl:value-of select=&quot;$v_xmlMsgAction&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:xmlMsgAction>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($v_msgResubmitIndicator) > 0&quot;>&lt;pfx3:msgResubmitInd>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_msgResubmitIndicator[1])&quot;>&lt;xsl:value-of select=&quot;$v_msgResubmitIndicator[1]&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:msgResubmitInd>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:msgResubmitInd xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:otherSoapHeaders xsi:nil=&quot;true&quot;/>&lt;/pfx3:messageContext>&lt;pfx3:extendedCtx>&lt;xsl:copy-of select=&quot;$Start/overwrite_extendedCtx/*&quot;/>&lt;/pfx3:extendedCtx>&lt;/pfx3:processContext>&lt;/ansbw6:root>&lt;/xsl:template>&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="SetPC_1-input" name="SetPC_1"
                    outputVariable="SetPC_1"
                    tibex:xpdlId="8a010699-6179-41b9-8c94-068a42d13ecd"
                    type="bw.internal.setSharedVariable" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="getTraceData-to-SetPC_1"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="SetPC_1-to-BE0000"
                            tibex:faultDetailsVar="SetPC_1" tibex:faultNameVar="FaultName">
                            <tibex:DesignExpression>
                                <tibex:expression expression="##error##" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition><![CDATA[##error##]]></bpws:transitionCondition>
                        </bpws:source>
                        <bpws:source linkName="SetPC_1-to-SetPC_1_MsgBody"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ansbw6=&quot;http://tns.tibco.com/bw/model/core/jobSV/1c6d3ff3-5c7d-4c2a-9519-7c932aacba1d&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; version=&quot;1.0&quot;>&lt;xsl:param name=&quot;ReadProcessStack&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;xsl:param name=&quot;getTraceData&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;xsl:param name=&quot;CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&lt;xsl:param name=&quot;Start&quot;/>&lt;xsl:template name=&quot;SetPC_1-input&quot; match=&quot;/&quot;>&lt;ansbw6:root>&lt;xsl:variable name=&quot;v_msgResubmitIndicator&quot; select=&quot;$Start/pfx3:msgProperties/ns:nvpList/ns:nvpElement[@name = &amp;quot;resubmitIndicator&amp;quot;]/@value&quot;/>&lt;xsl:variable name=&quot;v_xmlMsgAction&quot; select=&quot;$Start/pfx3:msgProperties/ns:nvpList/ns:nvpElement[@name = &amp;quot;xmlMsgAction&amp;quot;]/@value&quot;/>&lt;pfx3:processContext>&lt;pfx3:exchangeContext>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_exchangeId) > 0&quot;>&lt;pfx3:exchangeId>&lt;xsl:value-of select=&quot;$Start/overwrite_exchangeId&quot;/>&lt;/pfx3:exchangeId>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:exchangeId>&lt;xsl:value-of select=&quot;bwCustomFunctions:getGUID()&quot;/>&lt;/pfx3:exchangeId>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_serviceId) > 0&quot;>&lt;pfx3:serviceId>&lt;xsl:value-of select=&quot;$Start/overwrite_serviceId&quot;/>&lt;/pfx3:serviceId>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:serviceId>&lt;xsl:value-of select=&quot;bwCustomFunctions:getGUID()&quot;/>&lt;/pfx3:serviceId>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_exchangeCode) > 0&quot;>&lt;pfx3:exchangeCode>&lt;xsl:value-of select=&quot;$Start/overwrite_exchangeCode&quot;/>&lt;/pfx3:exchangeCode>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:exchangeCode>&lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&lt;/pfx3:exchangeCode>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($Start/overwrite_serviceCode) > 0&quot;>&lt;pfx3:serviceCode>&lt;xsl:value-of select=&quot;$Start/overwrite_serviceCode&quot;/>&lt;/pfx3:serviceCode>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:serviceCode>&lt;xsl:value-of select=&quot;$CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&lt;/pfx3:serviceCode>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:exchangeVersion xsi:nil=&quot;true&quot;/>&lt;pfx3:componentVersion xsi:nil=&quot;true&quot;/>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData/enable_tracing = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$getTraceData/enable_tracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:enabletracing>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultEnableTracing&quot;/>&lt;/pfx3:enabletracing>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData/log_msgbody = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$getTraceData/log_msgbody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_msgbody>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgBody&quot;/>&lt;/pfx3:log_msgbody>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData/log_msgconsulting = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$getTraceData/log_msgconsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_msgconsulting>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogMsgConsulting&quot;/>&lt;/pfx3:log_msgconsulting>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;/pfx3:log_component>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData/log_component = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$getTraceData/log_component&quot;/>&lt;/pfx3:log_component>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_component>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponent&quot;/>&lt;/pfx3:log_component>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:when>&lt;xsl:when test=&quot;$getTraceData/log_component_error = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$getTraceData/log_component_error&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:log_component_error>&lt;xsl:value-of select=&quot;$CORE_SERVICE-ProcessUtilities-ProcessCtx-defaultLogComponentError&quot;/>&lt;/pfx3:log_component_error>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;/>&lt;xsl:when test=&quot;$getTraceData/set_start_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData/set_start_exchange&quot;>&lt;pfx3:set_Start_Exchange>&lt;xsl:value-of select=&quot;$getTraceData/set_start_exchange&quot;/>&lt;/pfx3:set_Start_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;/>&lt;xsl:when test=&quot;$getTraceData/set_end_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData/set_end_exchange&quot;>&lt;pfx3:set_End_Exchange>&lt;xsl:value-of select=&quot;$getTraceData/set_end_exchange&quot;/>&lt;/pfx3:set_End_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;not(count($Start/overwrite_exchangeCode) > 0)&quot;/>&lt;xsl:when test=&quot;$getTraceData/set_error_exchange = (&amp;quot;T&amp;quot;,&amp;quot;F&amp;quot;)&quot;>&lt;xsl:if test=&quot;$getTraceData/set_error_exchange&quot;>&lt;pfx3:set_Error_Exchange>&lt;xsl:value-of select=&quot;$getTraceData/set_error_exchange&quot;/>&lt;/pfx3:set_Error_Exchange>&lt;/xsl:if>&lt;/xsl:when>&lt;/xsl:choose>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                        &lt;!--Only the resubmission service can flag this field to true. In case of a resubmission the value is in the xmlmsg header (which holds info on the resubmission). header needs to be parsed  otherwise value is considered as 'FALSE'-->&lt;pfx3:isReplay>&lt;xsl:value-of select=&quot;&amp;quot;F&amp;quot;&quot;/>&lt;/pfx3:isReplay>&lt;pfx3:weight>&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    &lt;!--It is not possible to get the real weight since no header is recoverable. Weight is defaulted to 100-->&#xa;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    &lt;!--A major point is the following:this an error path so a logOnError should be used in the code to log the error and no endexchange computing should be triggered upon the reception of this weight-->&lt;xsl:value-of select=&quot;100&quot;/>&lt;/pfx3:weight>&lt;pfx3:contextId>&lt;xsl:value-of select=&quot;bwCustomFunctions:getGUID()&quot;/>&lt;/pfx3:contextId>&lt;pfx3:contextTimeStamp>&lt;xsl:value-of select=&quot;current-dateTime()&quot;/>&lt;/pfx3:contextTimeStamp>&lt;pfx3:mainProcessPath>&lt;xsl:value-of select=&quot;$ReadProcessStack/processPath&quot;/>&lt;/pfx3:mainProcessPath>&lt;pfx3:History xsi:nil=&quot;true&quot;/>&lt;pfx3:RecvHistory xsi:nil=&quot;true&quot;/>&lt;/pfx3:exchangeContext>&lt;pfx3:messageContext>&lt;pfx3:msgTimestamp xsi:nil=&quot;true&quot;/>&lt;pfx3:messagingType>&lt;xsl:value-of select=&quot;$Start/msgType&quot;/>&lt;/pfx3:messagingType>&lt;pfx3:msgId xsi:nil=&quot;true&quot;/>&lt;pfx3:msgPriority xsi:nil=&quot;true&quot;/>&lt;pfx3:transactionId xsi:nil=&quot;true&quot;/>&lt;pfx3:correlationId xsi:nil=&quot;true&quot;/>&lt;pfx3:sourceSystem xsi:nil=&quot;true&quot;/>&lt;pfx3:privateCtxt xsi:nil=&quot;true&quot;/>&lt;xsl:copy-of select=&quot;$Start/pfx3:msgProperties&quot; copy-namespaces=&quot;no&quot;/>&lt;pfx3:msgBatchInfo xsi:nil=&quot;true&quot;/>&lt;xsl:choose>&lt;xsl:when test=&quot;count($v_xmlMsgAction) = 0&quot;>&lt;pfx3:xmlMsgAction xsi:nil=&quot;true&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:xmlMsgAction>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_xmlMsgAction)&quot;>&lt;xsl:value-of select=&quot;$v_xmlMsgAction&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:xmlMsgAction>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:choose>&lt;xsl:when test=&quot;count($v_msgResubmitIndicator) > 0&quot;>&lt;pfx3:msgResubmitInd>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($v_msgResubmitIndicator[1])&quot;>&lt;xsl:value-of select=&quot;$v_msgResubmitIndicator[1]&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:msgResubmitInd>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:msgResubmitInd xsi:nil=&quot;true&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;pfx3:otherSoapHeaders xsi:nil=&quot;true&quot;/>&lt;/pfx3:messageContext>&lt;pfx3:extendedCtx>&lt;xsl:copy-of select=&quot;$Start/overwrite_extendedCtx/*&quot;/>&lt;/pfx3:extendedCtx>&lt;/pfx3:processContext>&lt;/ansbw6:root>&lt;/xsl:template>&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:SetSharedVariable inline="true"
                        variableName="CORE_SERVICE.Resources.Variables.Job.ProcessContext" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;http://tns.tibco.com/bw/model/core/jobSV/9056491e-07ee-4a3a-a451-7be822b839fe&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;SetPC_1_MsgBody-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:root>&#xa;            &lt;pfx3:processContextMsgBody>&#xa;                &lt;pfx3:body>&#xa;                    &lt;xsl:choose>&#xa;                        &lt;xsl:when test=&quot;exists($Start/body)&quot;>&#xa;                            &lt;xsl:value-of select=&quot;$Start/body&quot;/>&#xa;                        &lt;/xsl:when>&#xa;                        &lt;xsl:otherwise>&#xa;                            &lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&#xa;                        &lt;/xsl:otherwise>&#xa;                    &lt;/xsl:choose>&#xa;                &lt;/pfx3:body>&#xa;            &lt;/pfx3:processContextMsgBody>&#xa;        &lt;/ansbw6:root>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="SetPC_1_MsgBody-input"
                    name="SetPC_1_MsgBody"
                    outputVariable="SetPC_1_MsgBody"
                    tibex:xpdlId="ea1d3d64-fd61-4d92-88d0-bff33797392f"
                    type="bw.internal.setSharedVariable" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="SetPC_1-to-SetPC_1_MsgBody"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="SetPC_1_MsgBody-to-BE0001"/>
                        <bpws:source
                            linkName="SetPC_1_MsgBody-to-BE0000"
                            tibex:faultDetailsVar="SetPC_1_MsgBody" tibex:faultNameVar="FaultName">
                            <tibex:DesignExpression>
                                <tibex:expression expression="##error##" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition><![CDATA[##error##]]></bpws:transitionCondition>
                        </bpws:source>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;http://tns.tibco.com/bw/model/core/jobSV/9056491e-07ee-4a3a-a451-7be822b839fe&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;SetPC_1_MsgBody-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:root>&#xa;            &lt;pfx3:processContextMsgBody>&#xa;                &lt;pfx3:body>&#xa;                    &lt;xsl:choose>&#xa;                        &lt;xsl:when test=&quot;exists($Start/body)&quot;>&#xa;                            &lt;xsl:value-of select=&quot;$Start/body&quot;/>&#xa;                        &lt;/xsl:when>&#xa;                        &lt;xsl:otherwise>&#xa;                            &lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&#xa;                        &lt;/xsl:otherwise>&#xa;                    &lt;/xsl:choose>&#xa;                &lt;/pfx3:body>&#xa;            &lt;/pfx3:processContextMsgBody>&#xa;        &lt;/ansbw6:root>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:SetSharedVariable inline="true"
                        variableName="CORE_SERVICE.Resources.Variables.Job.ProcessContextMsgBody" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:empty name="End1" tibex:xpdlId="7ccf5d5b-5d16-43b1-9b60-a5d7776fe349">
                <bpws:targets>
                    <bpws:target linkName="SetPC_2-to-End1"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="End1-to-SetPC_0_MsgBody"/>
                </bpws:sources>
            </bpws:empty>
            <bpws:extensionActivity>
                <tibex:extActivity
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;!--START COERCIONS-->&#xa;&lt;!-- $ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/*, element, ns2:History -->&#xa;&lt;!--END COERCIONS-->&lt;xsl:stylesheet xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ansbw6=&quot;http://tns.tibco.com/bw/model/core/jobSV/9056491e-07ee-4a3a-a451-7be822b839fe&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns2=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; version=&quot;1.0&quot;>&lt;xsl:import-schema namespace=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; schema-location=&quot;../../../CORE_COMMON/Resources/Schemas/CommonTypes/MsgHeaderTypes.xsd&quot;/>&lt;xsl:param name=&quot;Start&quot;/>&lt;xsl:param name=&quot;ParseHeader&quot;/>&lt;xsl:template name=&quot;SetPC_0_MsgBody-input&quot; match=&quot;/&quot;>&lt;ansbw6:root>&lt;xsl:choose>&lt;xsl:when test=&quot;count($ParseHeader/pfx4:Body/*) > 0&quot;>&lt;pfx3:processContextMsgBody>&lt;pfx3:body>&lt;xsl:value-of select=&quot;tib:render-xml($ParseHeader/pfx4:Body/*, true(), false())&quot;/>&lt;/pfx3:body>&lt;/pfx3:processContextMsgBody>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:processContextMsgBody>&lt;pfx3:body>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($Start/body)&quot;>&lt;xsl:value-of select=&quot;$Start/body&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:body>&lt;/pfx3:processContextMsgBody>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ansbw6:root>&lt;/xsl:template>&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="SetPC_0_MsgBody-input"
                    name="SetPC_0_MsgBody"
                    outputVariable="SetPC_0_MsgBody"
                    tibex:xpdlId="656703ba-9610-4190-93c4-9dba6db57868"
                    type="bw.internal.setSharedVariable" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="SetPC_0-to-SetPC_0_MsgBody"/>
                        <bpws:target linkName="End1-to-SetPC_0_MsgBody"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="SetPC_0_MsgBody-to-End"/>
                        <bpws:source
                            linkName="SetPC_0_MsgBody-to-BE0000"
                            tibex:faultDetailsVar="SetPC_0_MsgBody" tibex:faultNameVar="FaultName">
                            <tibex:DesignExpression>
                                <tibex:expression expression="##error##" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition><![CDATA[##error##]]></bpws:transitionCondition>
                        </bpws:source>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;!--START COERCIONS-->&#xa;&lt;!-- $ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/*, element, ns2:History -->&#xa;&lt;!--END COERCIONS-->&lt;xsl:stylesheet xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ansbw6=&quot;http://tns.tibco.com/bw/model/core/jobSV/9056491e-07ee-4a3a-a451-7be822b839fe&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns2=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; version=&quot;1.0&quot;>&lt;xsl:import-schema namespace=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; schema-location=&quot;../../../CORE_COMMON/Resources/Schemas/CommonTypes/MsgHeaderTypes.xsd&quot;/>&lt;xsl:param name=&quot;Start&quot;/>&lt;xsl:param name=&quot;ParseHeader&quot;/>&lt;xsl:template name=&quot;SetPC_0_MsgBody-input&quot; match=&quot;/&quot;>&lt;ansbw6:root>&lt;xsl:choose>&lt;xsl:when test=&quot;count($ParseHeader/pfx4:Body/*) > 0&quot;>&lt;pfx3:processContextMsgBody>&lt;pfx3:body>&lt;xsl:value-of select=&quot;tib:render-xml($ParseHeader/pfx4:Body/*, true(), false())&quot;/>&lt;/pfx3:body>&lt;/pfx3:processContextMsgBody>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx3:processContextMsgBody>&lt;pfx3:body>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($Start/body)&quot;>&lt;xsl:value-of select=&quot;$Start/body&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:attribute name=&quot;xsi:nil&quot;>true&lt;/xsl:attribute>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx3:body>&lt;/pfx3:processContextMsgBody>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/ansbw6:root>&lt;/xsl:template>&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:SetSharedVariable inline="true"
                        variableName="CORE_SERVICE.Resources.Variables.Job.ProcessContextMsgBody" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;!--START COERCIONS-->&#xa;&lt;!-- $ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/*, element, ns2:History -->&#xa;&lt;!--END COERCIONS-->&lt;xsl:stylesheet xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/BuildError-Start-Input.xsd&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns2=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; version=&quot;1.0&quot;>&lt;xsl:import-schema namespace=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; schema-location=&quot;../../../CORE_COMMON/Resources/Schemas/CommonTypes/MsgHeaderTypes.xsd&quot;/>&lt;xsl:param name=&quot;Start&quot;/>&lt;xsl:param name=&quot;_error&quot;/>&lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_short_msg&quot;/>&lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_msg&quot;/>&lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_code&quot;/>&lt;xsl:template name=&quot;BE0000-input&quot; match=&quot;/&quot;>&lt;ansbw6:input>&lt;ns5:bwBuildError>&lt;ns5:eventException>&lt;ns5:code>&lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_code&quot;/>&lt;/ns5:code>&lt;ns5:desc>&lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_msg&quot;/>&lt;/ns5:desc>&lt;ns5:shortDesc>&lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_short_msg&quot;/>&lt;/ns5:shortDesc>&lt;ns5:type>&lt;xsl:value-of select=&quot;&amp;quot;T&amp;quot;&quot;/>&lt;/ns5:type>&lt;ns5:severity>&lt;xsl:value-of select=&quot;2&quot;/>&lt;/ns5:severity>&lt;ns5:stackTrace>&lt;xsl:value-of select=&quot;concat(&amp;quot;Framework exception is: &amp;quot;, tib:render-xml($_error, false(), true()), &amp;quot;Linked process exception (if exists) was: &amp;quot;, tib:render-xml($Start/linkedError/*, false(), true()))&quot;/>&lt;/ns5:stackTrace>&lt;ns5:inputData>&lt;xsl:value-of select=&quot;tib:render-xml($Start, false(), true())&quot;/>&lt;/ns5:inputData>&lt;ns5:debugData xsi:nil=&quot;true&quot;/>&lt;/ns5:eventException>&lt;/ns5:bwBuildError>&lt;/ansbw6:input>&lt;/xsl:template>&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="BE0000-input" name="BE0000"
                    outputVariable="BE0000"
                    tibex:xpdlId="ac4f2783-3dba-43b4-957e-7d2bdd7baa5a"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="SetPC_0-to-BE0000"/>
                        <bpws:target linkName="SetPC_1-to-BE0000"/>
                        <bpws:target linkName="SetPC_2-to-BE0000"/>
                        <bpws:target linkName="SetPC_1_MsgBody-to-BE0000"/>
                        <bpws:target linkName="SetPC_0_MsgBody-to-BE0000"/>
                        <bpws:target linkName="getTraceData-to-BE0000"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="BE0000-to-GE0000"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;!--START COERCIONS-->&#xa;&lt;!-- $ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/*, element, ns2:History -->&#xa;&lt;!--END COERCIONS-->&lt;xsl:stylesheet xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/BuildError-Start-Input.xsd&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns2=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; version=&quot;1.0&quot;>&lt;xsl:import-schema namespace=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; schema-location=&quot;../../../CORE_COMMON/Resources/Schemas/CommonTypes/MsgHeaderTypes.xsd&quot;/>&lt;xsl:param name=&quot;Start&quot;/>&lt;xsl:param name=&quot;_error&quot;/>&lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_short_msg&quot;/>&lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_msg&quot;/>&lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_code&quot;/>&lt;xsl:template name=&quot;BE0000-input&quot; match=&quot;/&quot;>&lt;ansbw6:input>&lt;ns5:bwBuildError>&lt;ns5:eventException>&lt;ns5:code>&lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_code&quot;/>&lt;/ns5:code>&lt;ns5:desc>&lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_msg&quot;/>&lt;/ns5:desc>&lt;ns5:shortDesc>&lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0006_short_msg&quot;/>&lt;/ns5:shortDesc>&lt;ns5:type>&lt;xsl:value-of select=&quot;&amp;quot;T&amp;quot;&quot;/>&lt;/ns5:type>&lt;ns5:severity>&lt;xsl:value-of select=&quot;2&quot;/>&lt;/ns5:severity>&lt;ns5:stackTrace>&lt;xsl:value-of select=&quot;concat(&amp;quot;Framework exception is: &amp;quot;, tib:render-xml($_error, false(), true()), &amp;quot;Linked process exception (if exists) was: &amp;quot;, tib:render-xml($Start/linkedError/*, false(), true()))&quot;/>&lt;/ns5:stackTrace>&lt;ns5:inputData>&lt;xsl:value-of select=&quot;tib:render-xml($Start, false(), true())&quot;/>&lt;/ns5:inputData>&lt;ns5:debugData xsi:nil=&quot;true&quot;/>&lt;/ns5:eventException>&lt;/ns5:bwBuildError>&lt;/ansbw6:input>&lt;/xsl:template>&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess
                        subProcessName="CORE_COMMON.ProcessUtilities.ErrorHandling.BuildError" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/BuildError-Start-Input.xsd&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;getTraceData-1&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_code&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;BE0000-1-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:input>&#xa;            &lt;ns5:bwBuildError>&#xa;                &lt;xsl:variable name=&quot;sc&quot; select=&quot;if (count($Start/overwrite_serviceCode) > 0) then $Start/overwrite_serviceCode else $CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;                &lt;ns5:eventException>&#xa;                    &lt;ns5:code>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_code&quot;/>&#xa;                    &lt;/ns5:code>&#xa;                    &lt;ns5:desc>&#xa;                        &lt;xsl:value-of select=&quot;concat(string($CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg), &amp;quot;service code : &amp;quot;, $sc, &amp;quot; exchange code:&amp;quot;, string($getTraceData-1/exchangecode))&quot;/>&#xa;                    &lt;/ns5:desc>&#xa;                    &lt;ns5:shortDesc>&#xa;                        &lt;xsl:value-of select=&quot;concat(string($CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg), &amp;quot;service code : &amp;quot;, $sc, &amp;quot; exchange code:&amp;quot;, string($getTraceData-1/exchangecode))&quot;/>&#xa;                    &lt;/ns5:shortDesc>&#xa;                    &lt;ns5:type>&#xa;                        &lt;xsl:value-of select=&quot;&amp;quot;T&amp;quot;&quot;/>&#xa;                    &lt;/ns5:type>&#xa;                    &lt;ns5:severity>&#xa;                        &lt;xsl:value-of select=&quot;4&quot;/>&#xa;                    &lt;/ns5:severity>&#xa;                    &lt;ns5:stackTrace xsi:nil=&quot;true&quot;/>&#xa;                    &lt;ns5:inputData xsi:nil=&quot;true&quot;/>&#xa;                    &lt;ns5:debugData xsi:nil=&quot;true&quot;/>&#xa;                &lt;/ns5:eventException>&#xa;            &lt;/ns5:bwBuildError>&#xa;        &lt;/ansbw6:input>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="BE0000-1-input" name="BE0000-1"
                    outputVariable="BE0000-1"
                    tibex:xpdlId="d567bf2e-9ccb-46e1-a9ae-2af6c2ef8311"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="getTraceData-1-to-BE0000-1"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="BE0000-1-to-Generate-Error"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/BuildError-Start-Input.xsd&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;getTraceData-1&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_code&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;BE0000-1-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:input>&#xa;            &lt;ns5:bwBuildError>&#xa;                &lt;xsl:variable name=&quot;sc&quot; select=&quot;if (count($Start/overwrite_serviceCode) > 0) then $Start/overwrite_serviceCode else $CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;                &lt;ns5:eventException>&#xa;                    &lt;ns5:code>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_code&quot;/>&#xa;                    &lt;/ns5:code>&#xa;                    &lt;ns5:desc>&#xa;                        &lt;xsl:value-of select=&quot;concat(string($CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg), &amp;quot;service code : &amp;quot;, $sc, &amp;quot; exchange code:&amp;quot;, string($getTraceData-1/exchangecode))&quot;/>&#xa;                    &lt;/ns5:desc>&#xa;                    &lt;ns5:shortDesc>&#xa;                        &lt;xsl:value-of select=&quot;concat(string($CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg), &amp;quot;service code : &amp;quot;, $sc, &amp;quot; exchange code:&amp;quot;, string($getTraceData-1/exchangecode))&quot;/>&#xa;                    &lt;/ns5:shortDesc>&#xa;                    &lt;ns5:type>&#xa;                        &lt;xsl:value-of select=&quot;&amp;quot;T&amp;quot;&quot;/>&#xa;                    &lt;/ns5:type>&#xa;                    &lt;ns5:severity>&#xa;                        &lt;xsl:value-of select=&quot;4&quot;/>&#xa;                    &lt;/ns5:severity>&#xa;                    &lt;ns5:stackTrace xsi:nil=&quot;true&quot;/>&#xa;                    &lt;ns5:inputData xsi:nil=&quot;true&quot;/>&#xa;                    &lt;ns5:debugData xsi:nil=&quot;true&quot;/>&#xa;                &lt;/ns5:eventException>&#xa;            &lt;/ns5:bwBuildError>&#xa;        &lt;/ansbw6:input>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess
                        subProcessName="CORE_COMMON.ProcessUtilities.ErrorHandling.BuildError" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/BuildError-Start-Input.xsd&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;getTraceData&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_code&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;BE0000-1-1-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:input>&#xa;            &lt;ns5:bwBuildError>&#xa;                &lt;xsl:variable name=&quot;sc&quot; select=&quot;if (count($Start/overwrite_serviceCode) > 0) then $Start/overwrite_serviceCode else $CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;                &lt;ns5:eventException>&#xa;                    &lt;ns5:code>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_code&quot;/>&#xa;                    &lt;/ns5:code>&#xa;                    &lt;ns5:desc>&#xa;                        &lt;xsl:value-of select=&quot;concat(string($CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg), &amp;quot;service code : &amp;quot;, $sc, &amp;quot; exchange code:&amp;quot;, string($getTraceData/exchangecode))&quot;/>&#xa;                    &lt;/ns5:desc>&#xa;                    &lt;ns5:shortDesc>&#xa;                        &lt;xsl:value-of select=&quot;concat(string($CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg), &amp;quot;service code : &amp;quot;, $sc, &amp;quot; exchange code:&amp;quot;, string($getTraceData/exchangecode))&quot;/>&#xa;                    &lt;/ns5:shortDesc>&#xa;                    &lt;ns5:type>&#xa;                        &lt;xsl:value-of select=&quot;&amp;quot;T&amp;quot;&quot;/>&#xa;                    &lt;/ns5:type>&#xa;                    &lt;ns5:severity>&#xa;                        &lt;xsl:value-of select=&quot;4&quot;/>&#xa;                    &lt;/ns5:severity>&#xa;                    &lt;ns5:stackTrace xsi:nil=&quot;true&quot;/>&#xa;                    &lt;ns5:inputData xsi:nil=&quot;true&quot;/>&#xa;                    &lt;ns5:debugData xsi:nil=&quot;true&quot;/>&#xa;                &lt;/ns5:eventException>&#xa;            &lt;/ns5:bwBuildError>&#xa;        &lt;/ansbw6:input>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="BE0000-1-1-input" name="BE0000-1-1"
                    outputVariable="BE0000-1-1"
                    tibex:xpdlId="0cd37460-9799-47e2-8c9f-665025166cac"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="getTraceData-to-BE0000-1-1"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="BE0000-1-1-to-Generate-Error-1"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/BuildError-Start-Input.xsd&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;getTraceData&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_code&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;BE0000-1-1-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:input>&#xa;            &lt;ns5:bwBuildError>&#xa;                &lt;xsl:variable name=&quot;sc&quot; select=&quot;if (count($Start/overwrite_serviceCode) > 0) then $Start/overwrite_serviceCode else $CORE_SERVICE-SvcProps-Framework-NULL_CODE&quot;/>&#xa;                &lt;ns5:eventException>&#xa;                    &lt;ns5:code>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_code&quot;/>&#xa;                    &lt;/ns5:code>&#xa;                    &lt;ns5:desc>&#xa;                        &lt;xsl:value-of select=&quot;concat(string($CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg), &amp;quot;service code : &amp;quot;, $sc, &amp;quot; exchange code:&amp;quot;, string($getTraceData/exchangecode))&quot;/>&#xa;                    &lt;/ns5:desc>&#xa;                    &lt;ns5:shortDesc>&#xa;                        &lt;xsl:value-of select=&quot;concat(string($CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg), &amp;quot;service code : &amp;quot;, $sc, &amp;quot; exchange code:&amp;quot;, string($getTraceData/exchangecode))&quot;/>&#xa;                    &lt;/ns5:shortDesc>&#xa;                    &lt;ns5:type>&#xa;                        &lt;xsl:value-of select=&quot;&amp;quot;T&amp;quot;&quot;/>&#xa;                    &lt;/ns5:type>&#xa;                    &lt;ns5:severity>&#xa;                        &lt;xsl:value-of select=&quot;4&quot;/>&#xa;                    &lt;/ns5:severity>&#xa;                    &lt;ns5:stackTrace xsi:nil=&quot;true&quot;/>&#xa;                    &lt;ns5:inputData xsi:nil=&quot;true&quot;/>&#xa;                    &lt;ns5:debugData xsi:nil=&quot;true&quot;/>&#xa;                &lt;/ns5:eventException>&#xa;            &lt;/ns5:bwBuildError>&#xa;        &lt;/ansbw6:input>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess
                        subProcessName="CORE_COMMON.ProcessUtilities.ErrorHandling.BuildError" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/BuildError-Start-Input.xsd&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;getTraceData-2&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_code&quot;/>&#xa;    &lt;xsl:param name=&quot;ParseHeader&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;BE0000-1-1-1-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:input>&#xa;            &lt;ns5:bwBuildError>&#xa;                &lt;xsl:variable name=&quot;sc&quot; select=&quot;if (count($Start/overwrite_serviceCode) > 0) then $Start/overwrite_serviceCode else $ParseHeader/pfx4:msgHeader/ns1:serviceCode&quot;/>&#xa;                &lt;ns5:eventException>&#xa;                    &lt;ns5:code>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_code&quot;/>&#xa;                    &lt;/ns5:code>&#xa;                    &lt;ns5:desc>&#xa;                        &lt;xsl:value-of select=&quot;concat(string($CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg), &amp;quot;service code : &amp;quot;, $sc, &amp;quot; exchange code:&amp;quot;, string($getTraceData-2/exchangecode))&quot;/>&#xa;                    &lt;/ns5:desc>&#xa;                    &lt;ns5:shortDesc>&#xa;                        &lt;xsl:value-of select=&quot;concat(string($CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg), &amp;quot;service code : &amp;quot;, $sc, &amp;quot; exchange code:&amp;quot;, string($getTraceData-2/exchangecode))&quot;/>&#xa;                    &lt;/ns5:shortDesc>&#xa;                    &lt;ns5:type>&#xa;                        &lt;xsl:value-of select=&quot;&amp;quot;T&amp;quot;&quot;/>&#xa;                    &lt;/ns5:type>&#xa;                    &lt;ns5:severity>&#xa;                        &lt;xsl:value-of select=&quot;4&quot;/>&#xa;                    &lt;/ns5:severity>&#xa;                    &lt;ns5:stackTrace xsi:nil=&quot;true&quot;/>&#xa;                    &lt;ns5:inputData xsi:nil=&quot;true&quot;/>&#xa;                    &lt;ns5:debugData xsi:nil=&quot;true&quot;/>&#xa;                &lt;/ns5:eventException>&#xa;            &lt;/ns5:bwBuildError>&#xa;        &lt;/ansbw6:input>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="BE0000-1-1-1-input"
                    name="BE0000-1-1-1" outputVariable="BE0000-1-1-1"
                    tibex:xpdlId="2bec8a65-c0df-4fac-a936-9e282f0ea850"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="getTraceData-2-to-BE0000-1-1-1"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="BE0000-1-1-1-to-Generate-Error-1-1"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/BuildError-Start-Input.xsd&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;getTraceData-2&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_code&quot;/>&#xa;    &lt;xsl:param name=&quot;ParseHeader&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;BE0000-1-1-1-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:input>&#xa;            &lt;ns5:bwBuildError>&#xa;                &lt;xsl:variable name=&quot;sc&quot; select=&quot;if (count($Start/overwrite_serviceCode) > 0) then $Start/overwrite_serviceCode else $ParseHeader/pfx4:msgHeader/ns1:serviceCode&quot;/>&#xa;                &lt;ns5:eventException>&#xa;                    &lt;ns5:code>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_code&quot;/>&#xa;                    &lt;/ns5:code>&#xa;                    &lt;ns5:desc>&#xa;                        &lt;xsl:value-of select=&quot;concat(string($CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg), &amp;quot;service code : &amp;quot;, $sc, &amp;quot; exchange code:&amp;quot;, string($getTraceData-2/exchangecode))&quot;/>&#xa;                    &lt;/ns5:desc>&#xa;                    &lt;ns5:shortDesc>&#xa;                        &lt;xsl:value-of select=&quot;concat(string($CORE_COMMON-Errors-Codes-Frmk-FRMK-TE-0013_msg), &amp;quot;service code : &amp;quot;, $sc, &amp;quot; exchange code:&amp;quot;, string($getTraceData-2/exchangecode))&quot;/>&#xa;                    &lt;/ns5:shortDesc>&#xa;                    &lt;ns5:type>&#xa;                        &lt;xsl:value-of select=&quot;&amp;quot;T&amp;quot;&quot;/>&#xa;                    &lt;/ns5:type>&#xa;                    &lt;ns5:severity>&#xa;                        &lt;xsl:value-of select=&quot;4&quot;/>&#xa;                    &lt;/ns5:severity>&#xa;                    &lt;ns5:stackTrace xsi:nil=&quot;true&quot;/>&#xa;                    &lt;ns5:inputData xsi:nil=&quot;true&quot;/>&#xa;                    &lt;ns5:debugData xsi:nil=&quot;true&quot;/>&#xa;                &lt;/ns5:eventException>&#xa;            &lt;/ns5:bwBuildError>&#xa;        &lt;/ansbw6:input>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess
                        subProcessName="CORE_COMMON.ProcessUtilities.ErrorHandling.BuildError" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:throw faultName="ns12:bwException"
                faultVariable="Generate-Error-Fault-Schema1-Var"
                name="Generate-Error-1" tibex:xpdlId="80b44568-98f3-40f4-806a-9cd6bce72b3b">
                <tibex:inputBinding expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsl:stylesheet xmlns:pfx="http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException" xmlns:ns="http://soa.coe.com/CommonTypes/Mediation/Framework" xmlns:pfx3="http://soa.coe.com/CommonTypes/Mediation/BWProcessContext" xmlns:pfx4="http://soa.coe.com/CommonTypes/Mediation/xmlMsg" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:bwCustomFunctions="java://com.tibco.tibcobw.customfunctions.bwCustomFunctions" xmlns:ns2="http://www.tibco.com/pe/DeployedVarsType" xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions" xmlns:ns1="http://soa.coe.com/CommonTypes/Mediation/MsgHeader" xmlns:ns4="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException" xmlns:ns3="http://www.tibco.com/pe/EngineTypes" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns31="http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns5="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException" xmlns:ns7="http://soa.coe.com/CommonTypes/Mediation/SoapContext" xmlns:pd="http://xmlns.tibco.com/bw/process/2003" xmlns:ns12="http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd" xmlns:ns11="http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader" xmlns:ns22="http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader" xmlns:pfx1="http://soa.coe.com/infra/mediation/CommonServices/LogEvent" version="1.0"&gt;
    &lt;xsl:param name="BE0000-1-1"/&gt;
    &lt;xsl:template name="Generate-Error-1-Input" match="/"&gt;
        &lt;xsl:copy-of select="$BE0000-1-1/ns5:bwException"/&gt;
    &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;</tibex:inputBinding>
                <tibex:inputBindings>
                    <tibex:partBinding
                        expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;BE0000-1-1&quot;/>&#xa;    &lt;xsl:template name=&quot;Generate-Error-1-Input&quot; match=&quot;/&quot;>&#xa;        &lt;xsl:copy-of select=&quot;$BE0000-1-1/ns5:bwException&quot;/>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                </tibex:inputBindings>
                <bpws:targets>
                    <bpws:target linkName="BE0000-1-1-to-Generate-Error-1"/>
                </bpws:targets>
            </bpws:throw>
            <bpws:throw faultName="ns12:bwException"
                faultVariable="Generate-Error-Fault-Schema1-Var"
                name="Generate-Error-1-1" tibex:xpdlId="c37d9156-44d9-421b-8807-f59305e4f1c9">
                <tibex:inputBinding expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsl:stylesheet xmlns:pfx="http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException" xmlns:ns="http://soa.coe.com/CommonTypes/Mediation/Framework" xmlns:pfx3="http://soa.coe.com/CommonTypes/Mediation/BWProcessContext" xmlns:pfx4="http://soa.coe.com/CommonTypes/Mediation/xmlMsg" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:bwCustomFunctions="java://com.tibco.tibcobw.customfunctions.bwCustomFunctions" xmlns:ns2="http://www.tibco.com/pe/DeployedVarsType" xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions" xmlns:ns1="http://soa.coe.com/CommonTypes/Mediation/MsgHeader" xmlns:ns4="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException" xmlns:ns3="http://www.tibco.com/pe/EngineTypes" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns31="http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns5="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException" xmlns:ns7="http://soa.coe.com/CommonTypes/Mediation/SoapContext" xmlns:pd="http://xmlns.tibco.com/bw/process/2003" xmlns:ns12="http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd" xmlns:ns11="http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader" xmlns:ns22="http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader" xmlns:pfx1="http://soa.coe.com/infra/mediation/CommonServices/LogEvent" version="1.0"&gt;
    &lt;xsl:param name="BE0000-1-1-1"/&gt;
    &lt;xsl:template name="Generate-Error-1-1-Input" match="/"&gt;
        &lt;xsl:copy-of select="$BE0000-1-1-1/ns5:bwException"/&gt;
    &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;</tibex:inputBinding>
                <tibex:inputBindings>
                    <tibex:partBinding
                        expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;BE0000-1-1-1&quot;/>&#xa;    &lt;xsl:template name=&quot;Generate-Error-1-1-Input&quot; match=&quot;/&quot;>&#xa;        &lt;xsl:copy-of select=&quot;$BE0000-1-1-1/ns5:bwException&quot;/>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                </tibex:inputBindings>
                <bpws:targets>
                    <bpws:target linkName="BE0000-1-1-1-to-Generate-Error-1-1"/>
                </bpws:targets>
            </bpws:throw>
            <bpws:throw faultName="ns12:bwException"
                faultVariable="Generate-Error-Fault-Schema1-Var"
                name="GE0000" tibex:xpdlId="226ef55b-3238-4fde-ac18-4a2a45f1fb75">
                <tibex:inputBinding expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!--START COERCIONS--&gt;
&lt;!-- $ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/*, element, ns2:History --&gt;
&lt;!--END COERCIONS--&gt;&lt;xsl:stylesheet xmlns:ns="http://soa.coe.com/CommonTypes/Mediation/Framework" xmlns:pfx4="http://soa.coe.com/CommonTypes/Mediation/xmlMsg" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ns1="http://soa.coe.com/CommonTypes/Mediation/MsgHeader" xmlns:ns4="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns5="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException" xmlns:ns2="http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes" version="1.0"&gt;&lt;xsl:import-schema namespace="http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes" schema-location="../../../CORE_COMMON/Resources/Schemas/CommonTypes/MsgHeaderTypes.xsd"/&gt;&lt;xsl:param name="BE0000"/&gt;&lt;xsl:template name="Generate-Error-Fault-Schema1-Var" match="/"&gt;&lt;xsl:copy-of select="$BE0000/ns5:bwException" copy-namespaces="no"/&gt;&lt;/xsl:template&gt;&lt;/xsl:stylesheet&gt;</tibex:inputBinding>
                <tibex:inputBindings>
                    <tibex:partBinding
                        expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;!--START COERCIONS-->&#xa;&lt;!-- $ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/*, element, ns2:History -->&#xa;&lt;!--END COERCIONS-->&lt;xsl:stylesheet xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ns2=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; version=&quot;1.0&quot;>&lt;xsl:import-schema namespace=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; schema-location=&quot;../../../CORE_COMMON/Resources/Schemas/CommonTypes/MsgHeaderTypes.xsd&quot;/>&lt;xsl:param name=&quot;BE0000&quot;/>&lt;xsl:template name=&quot;Generate-Error-Fault-Schema1-Var&quot; match=&quot;/&quot;>&lt;xsl:copy-of select=&quot;$BE0000/ns5:bwException&quot; copy-namespaces=&quot;no&quot;/>&lt;/xsl:template>&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                </tibex:inputBindings>
                <bpws:targets>
                    <bpws:target linkName="BE0000-to-GE0000"/>
                </bpws:targets>
            </bpws:throw>
            <bpws:throw faultName="ns12:bwException"
                faultVariable="Generate-Error-Fault-Schema1-Var"
                name="Generate-Error" tibex:xpdlId="c75b96db-bbe1-4f2d-be1c-4bb90496f276">
                <tibex:inputBinding expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsl:stylesheet xmlns:pfx="http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException" xmlns:ns="http://soa.coe.com/CommonTypes/Mediation/Framework" xmlns:pfx3="http://soa.coe.com/CommonTypes/Mediation/BWProcessContext" xmlns:pfx4="http://soa.coe.com/CommonTypes/Mediation/xmlMsg" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:bwCustomFunctions="java://com.tibco.tibcobw.customfunctions.bwCustomFunctions" xmlns:ns2="http://www.tibco.com/pe/DeployedVarsType" xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions" xmlns:ns1="http://soa.coe.com/CommonTypes/Mediation/MsgHeader" xmlns:ns4="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException" xmlns:ns3="http://www.tibco.com/pe/EngineTypes" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns31="http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns5="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException" xmlns:ns7="http://soa.coe.com/CommonTypes/Mediation/SoapContext" xmlns:pd="http://xmlns.tibco.com/bw/process/2003" xmlns:ns12="http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd" xmlns:ns11="http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader" xmlns:ns22="http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader" xmlns:pfx1="http://soa.coe.com/infra/mediation/CommonServices/LogEvent" version="1.0"&gt;
    &lt;xsl:param name="BE0000-1"/&gt;
    &lt;xsl:template name="Generate-Error-Input" match="/"&gt;
        &lt;xsl:copy-of select="$BE0000-1/ns5:bwException"/&gt;
    &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;</tibex:inputBinding>
                <tibex:inputBindings>
                    <tibex:partBinding
                        expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;BE0000-1&quot;/>&#xa;    &lt;xsl:template name=&quot;Generate-Error-Input&quot; match=&quot;/&quot;>&#xa;        &lt;xsl:copy-of select=&quot;$BE0000-1/ns5:bwException&quot;/>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                </tibex:inputBindings>
                <bpws:targets>
                    <bpws:target linkName="BE0000-1-to-Generate-Error"/>
                </bpws:targets>
            </bpws:throw>
            <bpws:extensionActivity>
                <tibex:extActivity
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/BuildError-Start-Input.xsd&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:param name=&quot;_error&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_short_msg&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_msg&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_code&quot;/>&#xa;    &lt;xsl:template name=&quot;BE0001-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:input>&#xa;            &lt;ns5:bwBuildError>&#xa;                &lt;ns5:eventException>&#xa;                    &lt;ns5:code>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_code&quot;/>&#xa;                    &lt;/ns5:code>&#xa;                    &lt;ns5:desc>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_msg&quot;/>&#xa;                    &lt;/ns5:desc>&#xa;                    &lt;ns5:shortDesc>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_short_msg&quot;/>&#xa;                    &lt;/ns5:shortDesc>&#xa;                    &lt;ns5:type>&#xa;                        &lt;xsl:value-of select=&quot;&amp;quot;T&amp;quot;&quot;/>&#xa;                    &lt;/ns5:type>&#xa;                    &lt;ns5:severity>&#xa;                        &lt;xsl:value-of select=&quot;2&quot;/>&#xa;                    &lt;/ns5:severity>&#xa;                    &lt;ns5:stackTrace>&#xa;                        &lt;xsl:value-of select=&quot;concat(&amp;quot;Framework Exception is: &amp;quot;, tib:render-xml($_error, false(), true()), &amp;quot;Linked Process Exception (if exists) was: &amp;quot;, tib:render-xml($Start/linkedError/*, false(), true()))&quot;/>&#xa;                    &lt;/ns5:stackTrace>&#xa;                    &lt;ns5:inputData>&#xa;                        &lt;xsl:value-of select=&quot;tib:render-xml($Start, false(), true())&quot;/>&#xa;                    &lt;/ns5:inputData>&#xa;                    &lt;ns5:debugData xsi:nil=&quot;true&quot;/>&#xa;                &lt;/ns5:eventException>&#xa;            &lt;/ns5:bwBuildError>&#xa;        &lt;/ansbw6:input>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="BE0001-input" name="BE0001"
                    outputVariable="BE0001"
                    tibex:xpdlId="1f8f9a1c-1197-45dc-b067-efe37f381326"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="SetPC_1_MsgBody-to-BE0001"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="BE0001-to-GE0001"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://www.tibco.com/pe/GenerateErrorActivity/InputSchema&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_COMMON/ProcessUtilities/ErrorHandling/BuildError-Start-Input.xsd&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:param name=&quot;_error&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_short_msg&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_msg&quot;/>&#xa;    &lt;xsl:param name=&quot;CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_code&quot;/>&#xa;    &lt;xsl:template name=&quot;BE0001-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:input>&#xa;            &lt;ns5:bwBuildError>&#xa;                &lt;ns5:eventException>&#xa;                    &lt;ns5:code>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_code&quot;/>&#xa;                    &lt;/ns5:code>&#xa;                    &lt;ns5:desc>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_msg&quot;/>&#xa;                    &lt;/ns5:desc>&#xa;                    &lt;ns5:shortDesc>&#xa;                        &lt;xsl:value-of select=&quot;$CORE_COMMON-Errors-Codes-Frmk-ContextCreation-FRMK-CTX-0007_short_msg&quot;/>&#xa;                    &lt;/ns5:shortDesc>&#xa;                    &lt;ns5:type>&#xa;                        &lt;xsl:value-of select=&quot;&amp;quot;T&amp;quot;&quot;/>&#xa;                    &lt;/ns5:type>&#xa;                    &lt;ns5:severity>&#xa;                        &lt;xsl:value-of select=&quot;2&quot;/>&#xa;                    &lt;/ns5:severity>&#xa;                    &lt;ns5:stackTrace>&#xa;                        &lt;xsl:value-of select=&quot;concat(&amp;quot;Framework Exception is: &amp;quot;, tib:render-xml($_error, false(), true()), &amp;quot;Linked Process Exception (if exists) was: &amp;quot;, tib:render-xml($Start/linkedError/*, false(), true()))&quot;/>&#xa;                    &lt;/ns5:stackTrace>&#xa;                    &lt;ns5:inputData>&#xa;                        &lt;xsl:value-of select=&quot;tib:render-xml($Start, false(), true())&quot;/>&#xa;                    &lt;/ns5:inputData>&#xa;                    &lt;ns5:debugData xsi:nil=&quot;true&quot;/>&#xa;                &lt;/ns5:eventException>&#xa;            &lt;/ns5:bwBuildError>&#xa;        &lt;/ansbw6:input>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess
                        subProcessName="CORE_COMMON.ProcessUtilities.ErrorHandling.BuildError" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:activityExtension
                    expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;!--START COERCIONS-->&#xa;&lt;!-- $ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/*, element, ns2:History -->&#xa;&lt;!--END COERCIONS-->&lt;xsl:stylesheet xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ProcessCtx/Ctx_Xml-End-Output.xsd&quot; xmlns:ns2=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; version=&quot;1.0&quot;>&lt;xsl:import-schema namespace=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; schema-location=&quot;../../../CORE_COMMON/Resources/Schemas/CommonTypes/MsgHeaderTypes.xsd&quot;/>&lt;xsl:param name=&quot;ParseHeader&quot;/>&lt;xsl:param name=&quot;SetPC_2&quot;/>&lt;xsl:param name=&quot;SetPC_0&quot;/>&lt;xsl:template name=&quot;End-input&quot; match=&quot;/&quot;>&lt;ansbw6:Output>&lt;xsl:choose>&lt;xsl:when test=&quot;count($SetPC_0/pfx3:processContext) > 0&quot;>&lt;xsl:copy-of select=&quot;$SetPC_0/pfx3:processContext&quot; copy-namespaces=&quot;no&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:copy-of select=&quot;$SetPC_2/pfx3:processContext&quot; copy-namespaces=&quot;no&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:if test=&quot;count($ParseHeader) > 0&quot;>&lt;anyBody>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:Body/*&quot; copy-namespaces=&quot;no&quot;/>&lt;/anyBody>&lt;/xsl:if>&lt;/ansbw6:Output>&lt;/xsl:template>&lt;/xsl:stylesheet>"
                    expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"
                    inputVariable="End-input" name="End"
                    tibex:xpdlId="b137657b-fa6e-41ee-99b3-67cb13e5255c" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="SetPC_0_MsgBody-to-End"/>
                    </bpws:targets>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;!--START COERCIONS-->&#xa;&lt;!-- $ParseHeader/pfx4:msgHeader/ns1:exchangeHistory/*, element, ns2:History -->&#xa;&lt;!--END COERCIONS-->&lt;xsl:stylesheet xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ansbw6=&quot;/SM_TARSBookingUpsert_Async_Low/CORE_SERVICE/ProcessUtilities/ProcessCtx/Ctx_Xml-End-Output.xsd&quot; xmlns:ns2=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; version=&quot;1.0&quot;>&lt;xsl:import-schema namespace=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework_MsgHeaderTypes&quot; schema-location=&quot;../../../CORE_COMMON/Resources/Schemas/CommonTypes/MsgHeaderTypes.xsd&quot;/>&lt;xsl:param name=&quot;ParseHeader&quot;/>&lt;xsl:param name=&quot;SetPC_2&quot;/>&lt;xsl:param name=&quot;SetPC_0&quot;/>&lt;xsl:template name=&quot;End-input&quot; match=&quot;/&quot;>&lt;ansbw6:Output>&lt;xsl:choose>&lt;xsl:when test=&quot;count($SetPC_0/pfx3:processContext) > 0&quot;>&lt;xsl:copy-of select=&quot;$SetPC_0/pfx3:processContext&quot; copy-namespaces=&quot;no&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:copy-of select=&quot;$SetPC_2/pfx3:processContext&quot; copy-namespaces=&quot;no&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;xsl:if test=&quot;count($ParseHeader) > 0&quot;>&lt;anyBody>&lt;xsl:copy-of select=&quot;$ParseHeader/pfx4:Body/*&quot; copy-namespaces=&quot;no&quot;/>&lt;/anyBody>&lt;/xsl:if>&lt;/ansbw6:Output>&lt;/xsl:template>&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:config>
                        <bwext:BWActivity
                            activityTypeID="bw.internal.end"
                            xmlns:activityconfig="http://tns.tibco.com/bw/model/activityconfig"
                            xmlns:bwext="http://tns.tibco.com/bw/model/core/bwext"
                            xmlns:internalactivities="http://ns.tibco.com/bw/core/internalactivity" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <activityConfig>
                                <properties name="config" xsi:type="activityconfig:EMFProperty">
                                    <type href="http://ns.tibco.com/bw/core/internalactivity#//End"/>
                                    <value xsi:type="internalactivities:End"/>
                                </properties>
                            </activityConfig>
                        </bwext:BWActivity>
                    </tibex:config>
                </tibex:activityExtension>
            </bpws:extensionActivity>
            <bpws:throw faultName="ns12:bwException"
                faultVariable="Generate-Error-Fault-Schema1-Var"
                name="GE0001" tibex:xpdlId="2933adb9-e307-46ed-918a-bfd64f09fc03">
                <tibex:inputBinding expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsl:stylesheet xmlns:pfx="http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException" xmlns:ns="http://soa.coe.com/CommonTypes/Mediation/Framework" xmlns:pfx3="http://soa.coe.com/CommonTypes/Mediation/BWProcessContext" xmlns:pfx4="http://soa.coe.com/CommonTypes/Mediation/xmlMsg" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:bwCustomFunctions="java://com.tibco.tibcobw.customfunctions.bwCustomFunctions" xmlns:ns2="http://www.tibco.com/pe/DeployedVarsType" xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions" xmlns:ns1="http://soa.coe.com/CommonTypes/Mediation/MsgHeader" xmlns:ns4="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException" xmlns:ns3="http://www.tibco.com/pe/EngineTypes" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns31="http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns5="http://soa.coe.com/CommonTypes/Mediation/Framework/BWException" xmlns:ns7="http://soa.coe.com/CommonTypes/Mediation/SoapContext" xmlns:pd="http://xmlns.tibco.com/bw/process/2003" xmlns:ns12="http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd" xmlns:ns11="http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader" xmlns:ns22="http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader" xmlns:pfx1="http://soa.coe.com/infra/mediation/CommonServices/LogEvent" version="1.0"&gt;
    &lt;xsl:param name="BE0001"/&gt;
    &lt;xsl:template name="GE0001-Input" match="/"&gt;
        &lt;xsl:copy-of select="$BE0001/ns5:bwException" copy-namespaces="no"/&gt;
    &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;</tibex:inputBinding>
                <tibex:inputBindings>
                    <tibex:partBinding
                        expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BWException&quot; xmlns:ns=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework&quot; xmlns:pfx3=&quot;http://soa.coe.com/CommonTypes/Mediation/BWProcessContext&quot; xmlns:pfx4=&quot;http://soa.coe.com/CommonTypes/Mediation/xmlMsg&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:bwCustomFunctions=&quot;java://com.tibco.tibcobw.customfunctions.bwCustomFunctions&quot; xmlns:ns2=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://soa.coe.com/CommonTypes/Mediation/MsgHeader&quot; xmlns:ns4=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ns3=&quot;http://www.tibco.com/pe/EngineTypes&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ns31=&quot;http://schemas.dg.dexwired.net/GEDC_CS_AUDITLOGGING/ErrorHandling/BuildError&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns5=&quot;http://soa.coe.com/CommonTypes/Mediation/Framework/BWException&quot; xmlns:ns7=&quot;http://soa.coe.com/CommonTypes/Mediation/SoapContext&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/ProcessContext/StdProcessContext.xsd&quot; xmlns:ns11=&quot;http://schemas.dg.dexwired.net/GEDC_MESSAGING/MsgHeaders/MsgDCSFHeader&quot; xmlns:ns22=&quot;http://schemas.dg.dexwired.net/FIIP_COMMON/Messaging/StdSoapHeader&quot; xmlns:pfx1=&quot;http://soa.coe.com/infra/mediation/CommonServices/LogEvent&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;BE0001&quot;/>&#xa;    &lt;xsl:template name=&quot;GE0001-Input&quot; match=&quot;/&quot;>&#xa;        &lt;xsl:copy-of select=&quot;$BE0001/ns5:bwException&quot; copy-namespaces=&quot;no&quot;/>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                </tibex:inputBindings>
                <bpws:targets>
                    <bpws:target linkName="BE0001-to-GE0001"/>
                </bpws:targets>
            </bpws:throw>
        </bpws:flow>
    </bpws:scope>
</bpws:process>
